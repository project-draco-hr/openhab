{
  if (alias == null)   alias=item.getName();
  Db4oItem historicItem=new Db4oItem();
  historicItem.setName(alias);
  historicItem.setState(item.getState());
  historicItem.setTimestamp(new Date());
  try {
    db.store(historicItem);
    db.commit();
    logger.debug("Stored item: " + historicItem.toString());
  }
 catch (  Db4oException e) {
    db.rollback();
    logger.warn("Error storing state for item '{}' as '{}': {}",new String[]{item.getName(),alias,e.getMessage()});
  }
}
