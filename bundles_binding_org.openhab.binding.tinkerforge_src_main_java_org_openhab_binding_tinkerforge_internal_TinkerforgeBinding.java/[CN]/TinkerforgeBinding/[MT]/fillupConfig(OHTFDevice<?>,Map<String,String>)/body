{
  String uid=deviceConfig.get(ConfigKey.uid.name());
  ohtfDevice.setUid(uid);
  String subid=deviceConfig.get(ConfigKey.subid.name());
  if (subid != null) {
    ohtfDevice.setSubid(subid);
  }
  ohtfDevice.setOhid(deviceConfig.get(ConfigKeyAdmin.ohId.name()));
  EObject tfConfig=ohtfDevice.getTfConfig();
  EList<EStructuralFeature> features=null;
  if (tfConfig != null) {
    features=tfConfig.eClass().getEAllStructuralFeatures();
  }
  for (  String property : deviceConfig.keySet()) {
    if (Arrays.asList(ConfigKeyAdmin.values()).contains(property)) {
      continue;
    }
    if (features != null) {
      for (      EStructuralFeature feature : features) {
        logger.trace("found feature: {}",feature.getName());
        if (feature.getName().equals(property)) {
          logger.trace("{} feature type {}",LoggerConstants.TFINIT,feature.getEType().getInstanceClassName());
          logger.debug("configuring feature: {} for uid {}",feature.getName(),uid);
          if (feature.getEType().getInstanceClassName().equals("int")) {
            tfConfig.eSet(feature,Integer.parseInt(deviceConfig.get(property)));
          }
 else           if (feature.getEType().getInstanceClassName().equals("short")) {
            tfConfig.eSet(feature,Short.parseShort(deviceConfig.get(property)));
          }
 else {
            throw new ConfigurationException(feature.getName(),"unsupported configuration type needed");
          }
          break;
        }
      }
    }
  }
  ohConfig.getOhTfDevices().add(ohtfDevice);
}
