{
  String message=null;
  try {
    message=receiveUDP();
    LightwaveRFCommand command=messageConvertor.convertFromLightwaveRfMessage(message);
switch (command.getMessageType()) {
case OK:
      notifyOkListners((LightwaveRfCommandOk)command);
    break;
case ROOM_DEVICE:
  notifyRoomDeviceListners((LightwaveRfRoomDeviceMessage)command);
break;
case ROOM:
notifyRoomListners((LightwaveRfRoomMessage)command);
break;
case HEAT_REQUEST:
notifyHeatRequest((LightwaveRfHeatInfoRequest)command);
break;
case SERIAL:
notifySerialListners((LightwaveRfSerialMessage)command);
break;
case VERSION:
notifyVersionListners((LightwaveRfVersionMessage)command);
break;
default :
break;
}
}
 catch (IOException e) {
if (!(running == false && receiveSocket.isClosed())) {
logger.error("Error receiving message",e);
}
}
catch (LightwaveRfMessageException e) {
logger.error("Error converting message: " + message);
}
}
