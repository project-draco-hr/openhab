{
  if (StringUtils.isBlank(ip)) {
    ip=receiverIP;
  }
  if (eiscpPort < 1) {
    eiscpPort=receiverPort;
  }
  if (eiscpSocket == null || !connected || !eiscpSocket.isConnected())   try {
    eiscpSocket=new Socket(ip,eiscpPort);
    logger.debug("Connected to {} on port {}",ip,eiscpPort);
    outStream=new ObjectOutputStream(eiscpSocket.getOutputStream());
    inStream=new DataInputStream(eiscpSocket.getInputStream());
    outStream.flush();
    connected=true;
  }
 catch (  UnknownHostException unknownHost) {
    logger.error("You are trying to connect to an unknown host!",unknownHost);
  }
catch (  IOException ioException) {
    logger.error("Can't connect: " + ioException.getMessage());
  }
  return connected;
}
