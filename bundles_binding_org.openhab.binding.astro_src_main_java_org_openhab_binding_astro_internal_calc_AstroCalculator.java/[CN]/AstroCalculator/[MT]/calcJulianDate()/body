{
  int month=calendar.get(Calendar.MONTH) + 1;
  int year=calendar.get(Calendar.YEAR);
  if (month <= 2) {
    year=year - 1;
    month=month + 12;
  }
  double a=Math.floor(year / 100);
  double b=2 - a + Math.floor(a / 4);
  return Math.floor(365.25 * (year + 4716)) + Math.floor(30.6001 * (month + 1)) + calendar.get(Calendar.DAY_OF_MONTH)+ b - 1524.5;
}
