{
  Iterable<HistoricItem> result=getAllStatesSince(item,timestamp,serviceName);
  Iterator<HistoricItem> it=result.iterator();
  HistoricItem minimumHistoricItem=null;
  DecimalType minimum=(DecimalType)item.getStateAs(DecimalType.class);
  while (it.hasNext()) {
    HistoricItem historicItem=it.next();
    State state=historicItem.getState();
    if (state instanceof DecimalType) {
      DecimalType value=(DecimalType)state;
      if (minimum == null || value.compareTo(minimum) < 0) {
        minimum=value;
        minimumHistoricItem=historicItem;
      }
    }
  }
  if (minimumHistoricItem == null && minimum != null) {
    final DecimalType state=minimum;
    return new HistoricItem(){
      public Date getTimestamp(){
        return Calendar.getInstance().getTime();
      }
      public State getState(){
        return state;
      }
      public String getName(){
        return item.getName();
      }
    }
;
  }
 else {
    return minimumHistoricItem;
  }
}
