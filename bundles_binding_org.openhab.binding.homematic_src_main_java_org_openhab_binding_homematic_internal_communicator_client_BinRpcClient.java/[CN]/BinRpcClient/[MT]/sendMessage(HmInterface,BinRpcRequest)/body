{
  Socket socket=null;
  try {
    if (TRACE_ENABLED) {
      logger.trace("Client BinRpcRequest {}",request);
    }
    socket=new Socket(config.getHost(),hmInterface.getPort());
    socket.setSoTimeout(5000);
    socket.getOutputStream().write(request.createMessage());
    BinRpcResponse resp=new BinRpcResponse(socket.getInputStream(),false);
    if (TRACE_ENABLED) {
      logger.trace("Client BinRpcResponse: {}",resp.toString());
    }
    List<Object> data=resp.getResponseData();
    if (data.size() > 0) {
      Object response=data.get(0);
      if (response instanceof String) {
        if (!"".equals((String)response)) {
          throw new IOException("Unknown Result: " + response);
        }
      }
 else       if (response instanceof Map) {
        @SuppressWarnings("unchecked") Map<String,Object> map=(Map<String,Object>)response;
        Object faultCode=map.get("faultCode");
        Object faultString=map.get("faultString");
        throw new IOException(faultCode + " " + faultString);
      }
    }
  }
 catch (  ConnectException cex) {
    logger.info("Can't connect to interface {}",hmInterface);
  }
catch (  Exception ex) {
    throw new CcuClientException(ex.getMessage(),ex);
  }
 finally {
    try {
      if (socket != null) {
        socket.close();
      }
    }
 catch (    IOException ex) {
    }
  }
}
