{
  reloadExecutorPool.execute(new Runnable(){
    @Override public void run(){
      try {
        logger.debug("Reloading CCU datapoints");
        datapointReloadInProgress=true;
        tclRegaScriptClient.iterateAllDatapoints(new TclIteratorCallback(){
          @Override public void iterate(          HomematicBindingConfig bindingConfig,          HmValueItem hmValueItem){
            if (!ccuDatapoints.containsKey(bindingConfig)) {
              logger.info("Adding new {}",bindingConfig);
              ccuDatapoints.put(bindingConfig,hmValueItem);
            }
 else {
              Object cachedValue=refreshCache.get(bindingConfig);
              if (cachedValue != null) {
                logger.debug("Value changed while refreshing from '{}' to '{}' for binding {}",hmValueItem.getValue(),cachedValue,bindingConfig);
                hmValueItem.setValue(cachedValue);
              }
              if (hasChanged(bindingConfig,ccuDatapoints.get(bindingConfig),hmValueItem)) {
                ccuDatapoints.put(bindingConfig,hmValueItem);
                publish(bindingConfig,hmValueItem);
              }
            }
          }
        }
);
        logger.debug("Finished reloading {} CCU datapoints",ccuDatapoints.size());
      }
 catch (      CcuClientException ex) {
        logger.error(ex.getMessage(),ex);
      }
 finally {
        datapointReloadInProgress=false;
        refreshCache.clear();
      }
    }
  }
);
}
