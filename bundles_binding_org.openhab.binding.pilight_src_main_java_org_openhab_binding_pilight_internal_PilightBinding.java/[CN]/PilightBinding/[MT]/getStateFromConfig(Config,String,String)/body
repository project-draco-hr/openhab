{
  Location loc=config.getConfig().get(location);
  if (location != null) {
    Device dev=loc.getDevices().get(device);
    if (dev != null) {
      OnOffType state=OnOffType.valueOf(dev.getState().toUpperCase());
      if (dev.getDimlevel() != null && dev.getDimlevel() > 0) {
        if (state.equals(OnOffType.ON))         return new PercentType(getPercentageFromDimLevel(dev.getDimlevel().toString()));
 else         return new PercentType(0);
      }
      return state;
    }
  }
  return null;
}
