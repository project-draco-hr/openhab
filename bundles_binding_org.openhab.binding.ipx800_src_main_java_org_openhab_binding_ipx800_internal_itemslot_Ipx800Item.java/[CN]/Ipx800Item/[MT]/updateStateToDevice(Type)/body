{
  boolean changed=updateStateInternal(state);
  if (changed) {
    sendToOutput();
  }
  return changed;
}
