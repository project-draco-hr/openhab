{
  long startTime=System.currentTimeMillis();
  String remoteAddr=request.getRemoteAddr();
  try {
    InetAddress remoteIp=InetAddress.getByName(remoteAddr);
    if (remoteIp.isLoopbackAddress()) {
      return false;
    }
    return !subnetUtils.isInRange(remoteAddr);
  }
 catch (  UnknownHostException uhe) {
    logger.error(uhe.getLocalizedMessage());
  }
 finally {
    logger.debug("checking ip is in range took {}ms",System.currentTimeMillis() - startTime);
  }
  return true;
}
