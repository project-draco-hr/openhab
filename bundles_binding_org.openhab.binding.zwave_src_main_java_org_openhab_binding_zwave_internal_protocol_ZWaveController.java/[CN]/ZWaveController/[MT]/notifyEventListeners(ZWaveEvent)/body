{
  logger.debug("Notifying event listeners");
  ArrayList<ZWaveEventListener> copy=new ArrayList<ZWaveEventListener>(this.zwaveEventListeners);
  for (  ZWaveEventListener listener : copy) {
    logger.trace("Notifying {}",listener.toString());
    listener.ZWaveIncomingEvent(event);
  }
  if (event instanceof ZWaveInclusionEvent) {
    ZWaveInclusionEvent incEvent=(ZWaveInclusionEvent)event;
switch (incEvent.getEvent()) {
case IncludeDone:
      logger.debug("NODE {}: Including node.",incEvent.getNodeId());
    if (getNode(incEvent.getNodeId()) != null) {
      logger.debug("NODE {}: Newly included node already exists - not initialising.",incEvent.getNodeId());
      break;
    }
  ZWaveNode node=new ZWaveNode(this.homeId,incEvent.getNodeId(),this);
this.zwaveNodes.put(incEvent.getNodeId(),node);
node.advanceNodeStage(NodeStage.PROTOINFO);
break;
case ExcludeDone:
logger.debug("NODE {}: Excluding node.",incEvent.getNodeId());
if (getNode(incEvent.getNodeId()) == null) {
logger.debug("NODE {}: Excluding node that doesn't exist.",incEvent.getNodeId());
break;
}
this.zwaveNodes.remove(incEvent.getNodeId());
ZWaveNodeSerializer nodeSerializer=new ZWaveNodeSerializer();
nodeSerializer.DeleteNode(event.getNodeId());
break;
default :
break;
}
}
}
