{
  logger.debug("Message type = RESPONSE");
switch (incomingMessage.getMessageClass()) {
case GetVersion:
    handleGetVersionResponse(incomingMessage);
  if (incomingMessage.getMessageClass() == this.lastSentMessage.getExpectedReply() && !incomingMessage.isTransActionCanceled()) {
    notifyEventListeners(new ZWaveTransactionCompletedEvent(this.lastSentMessage));
    transactionCompleted.release();
    logger.trace("Released. Transaction completed permit count -> {}",transactionCompleted.availablePermits());
  }
break;
case MemoryGetId:
handleMemoryGetId(incomingMessage);
if (incomingMessage.getMessageClass() == this.lastSentMessage.getExpectedReply() && !incomingMessage.isTransActionCanceled()) {
notifyEventListeners(new ZWaveTransactionCompletedEvent(this.lastSentMessage));
transactionCompleted.release();
logger.trace("Released. Transaction completed permit count -> {}",transactionCompleted.availablePermits());
}
break;
case SerialApiGetInitData:
handleSerialApiGetInitDataResponse(incomingMessage);
if (incomingMessage.getMessageClass() == this.lastSentMessage.getExpectedReply() && !incomingMessage.isTransActionCanceled()) {
notifyEventListeners(new ZWaveTransactionCompletedEvent(this.lastSentMessage));
transactionCompleted.release();
logger.trace("Released. Transaction completed permit count -> {}",transactionCompleted.availablePermits());
}
break;
case IdentifyNode:
handleIdentifyNodeResponse(incomingMessage);
if (incomingMessage.getMessageClass() == this.lastSentMessage.getExpectedReply() && !incomingMessage.isTransActionCanceled()) {
notifyEventListeners(new ZWaveTransactionCompletedEvent(this.lastSentMessage));
transactionCompleted.release();
logger.trace("Released. Transaction completed permit count -> {}",transactionCompleted.availablePermits());
}
break;
case RequestNodeInfo:
handleRequestNodeInfoResponse(incomingMessage);
break;
case SerialApiGetCapabilities:
handleSerialAPIGetCapabilitiesResponse(incomingMessage);
if (incomingMessage.getMessageClass() == this.lastSentMessage.getExpectedReply() && !incomingMessage.isTransActionCanceled()) {
notifyEventListeners(new ZWaveTransactionCompletedEvent(this.lastSentMessage));
transactionCompleted.release();
logger.trace("Released. Transaction completed permit count -> {}",transactionCompleted.availablePermits());
}
break;
case SendData:
handleSendDataResponse(incomingMessage);
break;
case RemoveFailedNodeID:
handleRemoveFailedNodeResponse(incomingMessage);
if (incomingMessage.getMessageClass() == this.lastSentMessage.getExpectedReply() && !incomingMessage.isTransActionCanceled()) {
transactionCompleted.release();
logger.trace("Released. Transaction completed permit count -> {}",transactionCompleted.availablePermits());
}
break;
case GetRoutingInfo:
handleNodeRoutingInfoRequest(incomingMessage);
if (incomingMessage.getMessageClass() == this.lastSentMessage.getExpectedReply() && !incomingMessage.isTransActionCanceled()) {
transactionCompleted.release();
logger.trace("Released. Transaction completed permit count -> {}",transactionCompleted.availablePermits());
}
break;
case DeleteReturnRoute:
handleDeleteReturnRouteResponse(incomingMessage);
if (incomingMessage.getMessageClass() == this.lastSentMessage.getExpectedReply() && !incomingMessage.isTransActionCanceled()) {
transactionCompleted.release();
logger.trace("Released. Transaction completed permit count -> {}",transactionCompleted.availablePermits());
}
break;
case AssignReturnRoute:
handleAssignReturnRouteResponse(incomingMessage);
if (incomingMessage.getMessageClass() == this.lastSentMessage.getExpectedReply() && !incomingMessage.isTransActionCanceled()) {
transactionCompleted.release();
logger.trace("Released. Transaction completed permit count -> {}",transactionCompleted.availablePermits());
}
break;
case AssignSucReturnRoute:
handleAssignSucReturnRouteResponse(incomingMessage);
if (incomingMessage.getMessageClass() == this.lastSentMessage.getExpectedReply() && !incomingMessage.isTransActionCanceled()) {
transactionCompleted.release();
logger.trace("Released. Transaction completed permit count -> {}",transactionCompleted.availablePermits());
}
break;
default :
logger.warn(String.format("TODO: Implement processing of Response Message = %s (0x%02X)",incomingMessage.getMessageClass().getLabel(),incomingMessage.getMessageClass().getKey()));
break;
}
}
