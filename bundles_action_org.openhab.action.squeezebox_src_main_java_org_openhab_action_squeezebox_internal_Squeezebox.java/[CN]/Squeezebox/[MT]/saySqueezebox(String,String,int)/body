{
  if (StringUtils.isEmpty(playerId))   throw new NullArgumentException("playerId");
  if (StringUtils.isEmpty(message))   throw new NullArgumentException("message");
  if (squeezeServer == null) {
    logger.error("Squeeze Server yet to be initialised.");
    return false;
  }
  if (!squeezeServer.isConnected()) {
    logger.error("Not connected to the Squeeze Server. Please check your config and consult the openHAB WIKI for instructions on how to configure the Squeezebox properties.");
    return false;
  }
  SqueezePlayer player=squeezeServer.getPlayer(playerId);
  if (player == null) {
    logger.error("No Squeezebox player exists with name '{}'.",playerId);
    return false;
  }
  int playerVolume=player.getUnmuteVolume();
  boolean playerPowered=player.isPowered();
  boolean playerMuted=player.isMuted();
  squeezeServer.setVolume(playerId,volume == -1 ? playerVolume : volume);
  List<String> sentences=getSentences(message,MAX_SENTENCE_LENGTH);
  for (  String sentence : sentences) {
    logger.debug("Sending sentence to " + playerId + " ("+ sentence+ ")");
    String encodedSentence;
    try {
      encodedSentence=URLEncoder.encode(sentence,"UTF-8");
    }
 catch (    UnsupportedEncodingException e) {
      logger.warn("Failed to encode sentence '" + sentence + "'.",e);
      return false;
    }
    encodedSentence=encodedSentence.replace("+","%20");
    logger.trace("Encoded sentence " + encodedSentence);
    String url=GOOGLE_TRANSLATE_URL + encodedSentence;
    SqueezeboxListener listener=new SqueezeboxListener(playerId,url);
    player.addPlayerEventListener(listener);
    squeezeServer.playUrl(playerId,url);
    while (!listener.isFinished()) {
      try {
        Thread.sleep(100);
      }
 catch (      InterruptedException e) {
        break;
      }
    }
    player.removePlayerEventListener(listener);
    listener=null;
  }
  if (volume != -1)   squeezeServer.setVolume(playerId,playerVolume);
  if (playerMuted)   squeezeServer.mute(playerId);
  if (!playerPowered)   squeezeServer.powerOff(playerId);
  return true;
}
