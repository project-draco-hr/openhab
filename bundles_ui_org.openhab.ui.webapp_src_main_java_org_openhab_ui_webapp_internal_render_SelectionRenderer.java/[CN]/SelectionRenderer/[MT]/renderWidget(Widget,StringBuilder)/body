{
  String snippet=getSnippet("selection");
  snippet=snippet.replaceAll("%icon%",escapeURLPath(itemUIRegistry.getIcon(w)));
  snippet=snippet.replace("%label_header%",getLabel(w));
  String state=itemUIRegistry.getState(w).toString();
  Selection selection=(Selection)w;
  StringBuilder rowSB=new StringBuilder();
  for (  Mapping mapping : selection.getMappings()) {
    String rowSnippet=getSnippet("selection_row");
    rowSnippet=rowSnippet.replace("%item%",w.getItem() != null ? w.getItem() : "");
    rowSnippet=rowSnippet.replace("%cmd%",mapping.getCmd() != null ? mapping.getCmd() : "");
    rowSnippet=rowSnippet.replace("%label%",mapping.getLabel() != null ? mapping.getLabel() : "");
    if (state.equals(mapping.getCmd())) {
      rowSnippet=rowSnippet.replace("%checked%","checked=\"true\"");
    }
 else {
      rowSnippet=rowSnippet.replace("%checked%","");
    }
    rowSB.append(rowSnippet);
  }
  snippet=snippet.replace("%rows%",rowSB.toString());
  sb.append(snippet);
  return null;
}
