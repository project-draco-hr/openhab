{
  ItemRegistry registry=(ItemRegistry)ConsoleActivator.itemRegistryTracker.getService();
  EventPublisher publisher=(EventPublisher)ConsoleActivator.eventPublisherTracker.getService();
  if (publisher != null) {
    if (registry != null) {
      String itemName=interpreter.nextArgument();
      if (itemName != null) {
        try {
          Item item=registry.getItem(itemName);
          String stateName=interpreter.nextArgument();
          if (stateName != null) {
            State state=TypeParser.parse(item.getAcceptedDataTypes(),stateName);
            if (state != null) {
              publisher.postUpdate(itemName,state);
              interpreter.println("Update has been sent successfully.");
            }
 else {
              interpreter.println("Error: State '" + stateName + "' is not valid for item '"+ itemName+ "'");
            }
          }
 else {
            interpreter.println("Usage: " + getUpdateUsage());
          }
        }
 catch (        ItemNotFoundException e) {
          interpreter.println("Error: Item '" + itemName + "' does not exist.");
        }
      }
 else {
        interpreter.println("Usage: " + getUpdateUsage());
      }
    }
 else {
      interpreter.println("Sorry, no item registry service available!");
    }
  }
 else {
    interpreter.println("Sorry, no event publisher service available!");
  }
}
