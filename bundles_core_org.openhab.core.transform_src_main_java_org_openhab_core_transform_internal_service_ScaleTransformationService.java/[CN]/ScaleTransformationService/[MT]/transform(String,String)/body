{
  if (filename == null || source == null) {
    throw new TransformationException("the given parameters 'filename' and 'source' must not be null");
  }
  String result="not found";
  String path=getLocalizedProposedFilename(filename);
  try {
    double value=Double.parseDouble(source);
    FileInputStream fstream=new FileInputStream(path);
    DataInputStream in=new DataInputStream(fstream);
    BufferedReader br=new BufferedReader(new InputStreamReader(in));
    String strLine;
    while ((strLine=br.readLine()) != null) {
      Matcher matcher=limits_pattern.matcher(strLine);
      if (matcher.matches() && (matcher.groupCount() == 5)) {
        double minLimit=Double.parseDouble(matcher.group(2));
        double maxLimit=Double.parseDouble(matcher.group(3));
        if (matcher.group(1).equals(']'))         minLimit=minLimit - 0.0000000001;
        if (matcher.group(1).equals('['))         minLimit=minLimit + 0.0000000001;
        if ((minLimit < value) && (value < maxLimit)) {
          result=matcher.group(5);
          break;
        }
      }
    }
    in.close();
  }
 catch (  NumberFormatException e) {
    MapTransformationService map=new MapTransformationService();
    result=map.transform(filename,source);
  }
catch (  IOException e) {
    throw new TransformationException("An error occured while scaling value ",e);
  }
  return result;
}
