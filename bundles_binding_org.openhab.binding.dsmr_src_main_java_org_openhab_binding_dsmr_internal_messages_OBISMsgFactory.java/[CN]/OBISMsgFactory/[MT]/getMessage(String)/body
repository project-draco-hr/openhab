{
  OBISMessage msg=null;
  if (obisStr != null) {
    Matcher m=obisPattern.matcher(obisStr);
    if (m.matches()) {
      logger.debug("Received valid OBIS String:" + obisStr);
      List<String> cosemStringValues=new ArrayList<String>();
      OBISMsgType msgType=getOBISMsgType(m.group(1));
      if (msgType != OBISMsgType.UNKNOWN) {
        String allCosemStringValues=m.group(2);
        Matcher valueMatcher=obisValuePattern.matcher(allCosemStringValues);
        while (valueMatcher.find()) {
          cosemStringValues.add(valueMatcher.group(1));
        }
        logger.debug("OBIS message type:" + msgType + ", values:"+ cosemStringValues);
        msg=new OBISMessage(msgType);
        try {
          msg.parseCosemValues(cosemStringValues);
        }
 catch (        ParseException pe) {
          logger.error("Failed to parse " + obisStr,pe);
        }
      }
 else {
        logger.warn("Received OBIS unknown message:" + obisStr);
      }
    }
  }
  logger.debug("Converted to:" + msg);
  return msg;
}
