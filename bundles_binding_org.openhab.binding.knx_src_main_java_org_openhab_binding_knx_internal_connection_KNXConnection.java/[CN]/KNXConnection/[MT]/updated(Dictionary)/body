{
  if (config != null) {
    ip=(String)config.get("ip");
    String connectionTypeString=(String)config.get("type");
    if (StringUtils.isNotBlank(connectionTypeString)) {
      if ("TUNNEL".equals(connectionTypeString)) {
        ipConnectionType=KNXNetworkLinkIP.TUNNEL;
      }
 else       if ("ROUTER".equals(connectionTypeString)) {
        ipConnectionType=KNXNetworkLinkIP.ROUTER;
        if (StringUtils.isBlank(ip)) {
          ip=DEFAULT_MULTICAST_IP;
        }
      }
 else {
        throw new ConfigurationException("type","unknown IP connection type '" + connectionTypeString + "'! Known types are either 'TUNNEL' or 'ROUTER'");
      }
    }
 else {
      ipConnectionType=KNXNetworkLinkIP.TUNNEL;
    }
    String portConfig=(String)config.get("port");
    if (StringUtils.isNotBlank(portConfig)) {
      port=Integer.parseInt(portConfig);
    }
 else {
      port=KNXnetIPConnection.IP_PORT;
    }
    localIp=(String)config.get("localIp");
    serialPort=(String)config.get("serialPort");
    String readingPauseString=(String)config.get("pause");
    if (StringUtils.isNotBlank(readingPauseString)) {
      readingPause=Long.parseLong(readingPauseString);
    }
    String responseTimeoutString=(String)config.get("timeout");
    if (StringUtils.isNotBlank(responseTimeoutString)) {
      long timeout=Long.parseLong(responseTimeoutString);
      if (timeout > 0) {
        responseTimeout=timeout;
      }
    }
    String readRetriesLimitString=(String)config.get("readRetries");
    if (StringUtils.isNotBlank(readRetriesLimitString)) {
      int readRetries=Integer.parseInt(readRetriesLimitString);
      if (readRetries > 0) {
        readRetriesLimit=readRetries;
      }
    }
    String autoReconnectPeriodString=(String)config.get("autoReconnectPeriod");
    if (StringUtils.isNotBlank(autoReconnectPeriodString)) {
      int autoReconnectPeriodValue=Integer.parseInt(autoReconnectPeriodString);
      if (autoReconnectPeriodValue >= 0) {
        autoReconnectPeriod=autoReconnectPeriodValue;
      }
    }
    if (pc == null)     connect();
  }
}
