{
  if (config != null) {
    String usernameString=(String)config.get("username");
    username=usernameString;
    if (StringUtils.isBlank(username)) {
      throw new ConfigurationException("gcal:username","username must not be blank - please configure an aproppriate username in openhab.cfg");
    }
    String passwordString=(String)config.get("password");
    password=passwordString;
    if (StringUtils.isBlank(password)) {
      throw new ConfigurationException("gcal:password","password must not be blank - please configure an aproppriate password in openhab.cfg");
    }
    String urlString=(String)config.get("url");
    url=urlString;
    if (StringUtils.isBlank(url)) {
      throw new ConfigurationException("gcal:url","url must not be blank - please configure an aproppriate url in openhab.cfg");
    }
    String refreshString=(String)config.get("refresh");
    if (StringUtils.isNotBlank(refreshString)) {
      refreshInterval=Integer.parseInt(refreshString);
    }
    isProperlyConfigured=true;
    start();
    try {
      scheduler=StdSchedulerFactory.getDefaultScheduler();
    }
 catch (    SchedulerException se) {
      logger.error("initializing scheduler throws exception",se);
    }
  }
}
