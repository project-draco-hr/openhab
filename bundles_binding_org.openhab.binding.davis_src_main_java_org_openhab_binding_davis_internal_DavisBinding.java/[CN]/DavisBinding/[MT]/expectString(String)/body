{
  int length=string.length();
  byte[] buf=readBytes(length);
  String s=new String(buf);
  if (!string.equals(s)) {
    throw new IOException("Invalid response: " + escape(s));
  }
}
