{
  while (!folderRefreshMap.isEmpty()) {
    try {
      for (      String foldername : folderRefreshMap.keySet()) {
        if (refreshCount % folderRefreshMap.get(foldername) > 0)         continue;
        logger.debug("Refreshing folder '{}'",foldername);
        checkFolder(foldername);
      }
      refreshCount=(refreshCount + gcdRefresh) % lcmRefresh;
    }
 catch (    Throwable e) {
      logger.error("An unexpected exception has occured",e);
    }
    try {
      if (gcdRefresh <= 0)       break;
      sleep(gcdRefresh * 1000L);
    }
 catch (    InterruptedException e) {
      break;
    }
  }
}
