{
  File folder=getFolder(foldername);
  if (!folder.exists()) {
    return;
  }
  String[] extensions=folderFileExtMap.get(foldername);
  Set<String> currentFileNames=new HashSet<String>();
  for (  File file : folder.listFiles()) {
    if (file.isDirectory())     continue;
    if (!file.getName().contains("."))     continue;
    if (file.getName().startsWith("."))     continue;
    String fileExt=getExtension(file.getName());
    if (extensions != null && extensions.length > 0 && !ArrayUtils.contains(extensions,fileExt))     continue;
    currentFileNames.add(file.getName());
    Long timeLastCheck=lastCheckedMap.get(file.getName());
    if (timeLastCheck == null)     timeLastCheck=0L;
    if (FileUtils.isFileNewer(file,timeLastCheck)) {
      if (modelRepo != null) {
        try {
          logger.info("Loading file '{}'",file.getName());
          if (modelRepo.addOrRefreshModel(file.getName(),FileUtils.openInputStream(file))) {
            lastCheckedMap.put(file.getName(),new Date().getTime());
          }
        }
 catch (        IOException e) {
          logger.warn("Cannot open file '" + file.getAbsolutePath() + "' for reading.",e);
        }
      }
    }
  }
  if (lastFileNames.get(foldername) != null) {
    ;
    for (    String fileName : lastFileNames.get(foldername)) {
      if (!currentFileNames.contains(fileName)) {
        logger.info("File '{}' has been deleted",fileName);
        if (modelRepo != null) {
          modelRepo.removeModel(fileName);
        }
      }
    }
  }
  lastFileNames.put(foldername,currentFileNames);
}
