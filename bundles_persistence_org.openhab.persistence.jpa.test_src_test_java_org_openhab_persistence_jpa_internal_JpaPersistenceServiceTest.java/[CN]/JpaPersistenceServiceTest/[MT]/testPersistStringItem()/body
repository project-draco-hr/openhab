{
  GenericItem testItem=new GenericItem("testItem"){
    @Override public List<Class<? extends State>> getAcceptedDataTypes(){
      return Collections.emptyList();
    }
    @Override public List<Class<? extends Command>> getAcceptedCommandTypes(){
      return Collections.emptyList();
    }
  }
;
  testItem.setState(StringType.valueOf("foobar"));
  JpaPersistenceService service=new TestJpaPersistenceService();
  service.store(testItem);
  FilterCriteria crit=new FilterCriteria();
  crit.setItemName("testItem");
  crit.setState(testItem.getState());
  Iterable<HistoricItem> result=service.query(crit);
  int len=0;
  while (result.iterator().hasNext()) {
    len++;
  }
  assertTrue(len == 1);
}
