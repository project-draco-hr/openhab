{
  super.registerItems();
  broadcaster.getBroadcasterConfig().addFilter(new PerRequestBroadcastFilter(){
    @Override public BroadcastAction filter(    String broadcasterId,    Object originalMessage,    Object message){
      return new BroadcastAction(message);
    }
    @Override public BroadcastAction filter(    String broadcasterId,    AtmosphereResource resource,    Object originalMessage,    Object message){
      UUIDBroadcasterCache uuidCache=(UUIDBroadcasterCache)broadcaster.getBroadcasterConfig().getBroadcasterCache();
      List<Object> entries=uuidCache.retrieveFromCache(null,resource);
      if (entries != null)       logger.trace("UUID {} had {} previous messages",resource.uuid(),entries.size());
      return new BroadcastAction(ACTION.CONTINUE,message);
    }
  }
);
}
