{
  ZWaveStateConverter<?,?> converter=this.getStateConverter(item,event.getValue());
  String sensorType=arguments.get("sensor_type");
  String sensorScale=arguments.get("sensor_scale");
  ZWaveMultiLevelSensorValueEvent sensorEvent=(ZWaveMultiLevelSensorValueEvent)event;
  if (converter == null) {
    logger.warn("NODE {}: No converter found for item = {}, endpoint = {}, ignoring event.",event.getNodeId(),item.getName(),event.getEndpoint());
    return;
  }
  if (sensorType != null && SensorType.getSensorType(Integer.parseInt(sensorType)) != sensorEvent.getSensorType()) {
    return;
  }
  Object val=event.getValue();
  if (sensorScale != null && Integer.parseInt(sensorScale) != sensorEvent.getSensorScale()) {
    int intType=Integer.parseInt(sensorType);
    SensorType senType=SensorType.getSensorType(intType);
    if (senType == null) {
      logger.error("Node {}: Error parsing sensor type {}",event.getNodeId(),sensorType);
    }
 else {
switch (senType) {
case TEMPERATURE:
        if (sensorEvent.getSensorScale() == 0) {
          double c=((BigDecimal)val).doubleValue();
          val=new BigDecimal((c * 9.0 / 5.0) + 32.0);
        }
 else         if (sensorEvent.getSensorScale() == 1) {
          double f=((BigDecimal)val).doubleValue();
          val=new BigDecimal((f - 32.0) * 5.0 / 9.0);
        }
      break;
default :
    break;
}
}
logger.debug("NODE {}: Sensor is reporting scale {}, requiring conversion to {}. Value is now {}.",event.getNodeId(),sensorEvent.getSensorScale(),sensorScale,val);
}
State state=converter.convertFromValueToState(val);
this.getEventPublisher().postUpdate(item.getName(),state);
}
