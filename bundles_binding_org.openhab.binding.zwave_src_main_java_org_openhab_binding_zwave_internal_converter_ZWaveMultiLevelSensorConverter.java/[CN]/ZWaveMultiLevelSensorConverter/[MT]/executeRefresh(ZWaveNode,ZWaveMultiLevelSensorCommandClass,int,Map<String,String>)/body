{
  String sensorType=arguments.get("sensor_type");
  SerialMessage serialMessage;
  logger.debug("Generating poll message for {} for node {} endpoint {}",commandClass.getCommandClass().getLabel(),node.getNodeId(),endpointId);
  if (sensorType != null) {
    serialMessage=node.encapsulate(commandClass.getMessage(SensorType.getSensorType(Integer.parseInt(sensorType))),commandClass,endpointId);
  }
 else {
    serialMessage=node.encapsulate(commandClass.getValueMessage(),commandClass,endpointId);
  }
  if (serialMessage == null) {
    logger.warn("Generating message failed for command class = {}, node = {}, endpoint = {}",commandClass.getCommandClass().getLabel(),node.getNodeId(),endpointId);
    return;
  }
  this.getController().sendData(serialMessage);
}
