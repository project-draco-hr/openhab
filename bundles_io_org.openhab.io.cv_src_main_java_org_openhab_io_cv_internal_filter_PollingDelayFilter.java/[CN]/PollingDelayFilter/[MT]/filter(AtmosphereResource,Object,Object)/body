{
  final HttpServletRequest request=resource.getRequest();
  try {
    if (!ResponseTypeHelper.isStreamingTransport(request) && message instanceof ItemStateListBean && originalMessage instanceof Item) {
      final String delayedBroadcasterName=resource.getRequest().getPathInfo();
      Executors.newSingleThreadExecutor().submit(new Runnable(){
        public void run(){
          try {
            Thread.sleep(300);
            CometVisuBroadcaster delayedBroadcaster=(CometVisuBroadcaster)BroadcasterFactory.getDefault().lookup(CometVisuBroadcaster.class,delayedBroadcasterName);
            delayedBroadcaster.broadcast(message,resource);
          }
 catch (          Exception e) {
            logger.error(e.getMessage());
          }
        }
      }
);
    }
 else {
      return new BroadcastAction(ACTION.CONTINUE,message);
    }
  }
 catch (  Exception e) {
    logger.error(e.getMessage());
  }
  return new BroadcastAction(ACTION.ABORT,message);
}
