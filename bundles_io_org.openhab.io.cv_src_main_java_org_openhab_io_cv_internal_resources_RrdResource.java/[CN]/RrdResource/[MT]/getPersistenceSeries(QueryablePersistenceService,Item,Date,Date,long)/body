{
  Map<Long,ArrayList<String>> data=new TreeMap<Long,ArrayList<String>>();
  FilterCriteria filter=new FilterCriteria();
  filter.setBeginDate(timeBegin);
  filter.setEndDate(timeEnd);
  filter.setItemName(item.getName());
  filter.setOrdering(Ordering.ASCENDING);
  Iterable<HistoricItem> result=persistenceService.query(filter);
  Iterator<HistoricItem> it=result.iterator();
  int dataCounter=0;
  while (it.hasNext()) {
    dataCounter++;
    HistoricItem historicItem=it.next();
    State state=historicItem.getState();
    if (state instanceof DecimalType) {
      ArrayList<String> vals=new ArrayList<String>();
      vals.add(formatDouble(((DecimalType)state).doubleValue(),"null",true));
      data.put(historicItem.getTimestamp().getTime(),vals);
    }
  }
  logger.debug("'{}' querying item '{}' from '{}' to '{}' => '{}' results",persistenceService.getName(),filter.getItemName(),filter.getBeginDate(),filter.getEndDate(),dataCounter);
  return convertToRrd(data);
}
