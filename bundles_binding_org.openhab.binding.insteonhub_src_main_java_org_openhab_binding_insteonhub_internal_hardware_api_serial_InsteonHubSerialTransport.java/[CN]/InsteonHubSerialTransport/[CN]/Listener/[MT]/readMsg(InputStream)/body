{
  byte b;
  while ((b=InsteonHubByteUtil.readByte(in)) != InsteonHubMsgConst.STX) {
    if (logger.isDebugEnabled()) {
      logger.debug("Ignoring non STX byte: " + b);
    }
  }
  byte cmd=InsteonHubByteUtil.readByte(in);
  Integer msgSize=InsteonHubMsgConst.REC_MSG_SIZES.get(cmd);
  if (msgSize == null) {
    logger.warn("Received unknown command type '" + cmd + "' - If you see this frequently, "+ "please save debug logs and report this as a bug.");
    return null;
  }
  byte[] msg=new byte[msgSize];
  msg[0]=InsteonHubMsgConst.STX;
  msg[1]=cmd;
  InsteonHubByteUtil.fillBuffer(in,msg,2);
  if (logger.isDebugEnabled()) {
    logger.debug("Received Message from INSTEON Hub: " + Hex.encodeHexString(msg));
  }
  return msg;
}
