{
  String proxySet=System.getProperty("http.proxySet");
  String proxyHost=null;
  int proxyPort=80;
  String proxyUser=null;
  String proxyPassword=null;
  String nonProxyHosts=null;
  if ("true".equalsIgnoreCase(proxySet)) {
    proxyHost=System.getProperty("http.proxyHost");
    String proxyPortString=System.getProperty("http.proxyPort");
    if (StringUtils.isNotBlank(proxyPortString)) {
      try {
        proxyPort=Integer.valueOf(proxyPortString);
      }
 catch (      NumberFormatException e) {
        logger.warn("'{}' is not a valid proxy port - using port 80 instead");
      }
    }
    proxyUser=System.getProperty("http.proxyUser");
    proxyPassword=System.getProperty("http.proxyPassword");
    nonProxyHosts=System.getProperty("http.nonProxyHosts");
  }
  return executeUrl(httpMethod,url,timeout,proxyHost,proxyPort,proxyUser,proxyPassword,nonProxyHosts);
}
