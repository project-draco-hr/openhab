{
  super(raw);
  String[] tokens=this.getPayload().split(Message.DELIMETER);
  byte[] bytes=Base64.decodeBase64(tokens[2].getBytes());
  rooms=new ArrayList<RoomInformation>();
  devices=new ArrayList<DeviceInformation>();
  int roomCount=bytes[2];
  int byteOffset=3;
  for (int i=0; i < roomCount; i++) {
    int position=bytes[byteOffset++];
    String name="";
    int nameLength=(int)bytes[byteOffset++] & 0xff;
    for (int char_idx=0; char_idx < nameLength; char_idx++) {
      name+=(char)bytes[byteOffset++];
    }
    String rfAddress=Utils.toHex(((int)bytes[byteOffset] & 0xff),((int)bytes[byteOffset + 1] & 0xff),((int)bytes[byteOffset + 2] & 0xff));
    byteOffset+=3;
    rooms.add(new RoomInformation(position,name,rfAddress));
  }
  int deviceCount=bytes[byteOffset++];
  for (int deviceId=0; deviceId < deviceCount; deviceId++) {
    DeviceType deviceType=DeviceType.create(bytes[byteOffset++]);
    String rfAddress=Utils.toHex(((int)bytes[byteOffset] & 0xff),((int)bytes[byteOffset + 1] & 0xff),((int)bytes[byteOffset + 2] & 0xff));
    byteOffset+=3;
    String serialNumber="";
    for (int i=0; i < 10; i++) {
      serialNumber+=(char)bytes[byteOffset++];
    }
    int nameLength=(int)bytes[byteOffset++] & 0xff;
    String deviceName="";
    for (int char_idx=0; char_idx < nameLength; char_idx++) {
      deviceName+=(char)bytes[byteOffset++];
    }
    int roomId=(int)bytes[byteOffset++] & 0xff;
    devices.add(new DeviceInformation(deviceType,serialNumber,rfAddress,deviceName,roomId));
  }
}
