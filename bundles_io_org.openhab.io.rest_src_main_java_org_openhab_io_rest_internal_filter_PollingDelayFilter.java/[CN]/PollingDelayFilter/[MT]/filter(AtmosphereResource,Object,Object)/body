{
  final HttpServletRequest request=resource.getRequest();
  try {
    boolean isItemMessage=originalMessage instanceof Item || originalMessage instanceof GroupItem;
    boolean isStreamingTransport=false;
    try {
      isStreamingTransport=ResponseTypeHelper.isStreamingTransport(request);
    }
 catch (    Exception e) {
      logger.error(e.getMessage());
      return new BroadcastAction(ACTION.ABORT,message);
    }
    if (!isStreamingTransport && message instanceof PageBean && isItemMessage) {
      final String delayedBroadcasterName=resource.getRequest().getPathInfo();
      Executors.newSingleThreadExecutor().submit(new Runnable(){
        public void run(){
          try {
            Thread.sleep(300);
            GeneralBroadcaster delayedBroadcaster=(GeneralBroadcaster)BroadcasterFactory.getDefault().lookup(GeneralBroadcaster.class,delayedBroadcasterName);
            delayedBroadcaster.broadcast(message,resource);
          }
 catch (          Exception e) {
            logger.error(e.getMessage());
          }
        }
      }
);
    }
 else {
      return new BroadcastAction(ACTION.CONTINUE,message);
    }
  }
 catch (  Exception e) {
    logger.error(e.getMessage());
    return new BroadcastAction(ACTION.ABORT,message);
  }
  return new BroadcastAction(ACTION.ABORT,message);
}
