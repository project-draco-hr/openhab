{
  List<VisibilityRule> ruleList=w.getVisibility();
  if (ruleList == null)   return true;
  if (ruleList.size() == 0)   return true;
  logger.debug("Checking visiblity for widget '{}'.",w.getLabel());
  for (  VisibilityRule rule : w.getVisibility()) {
    if (rule.getItem() == null)     continue;
    if (rule.getState() == null)     continue;
    Item item;
    try {
      item=itemRegistry.getItem(rule.getItem());
    }
 catch (    ItemNotFoundException e) {
      logger.error("Cannot retrieve visibility item {} for widget {}",rule.getItem(),w.eClass().getInstanceTypeName());
      return true;
    }
    State state=item.getState();
    String value;
    if (rule.getSign() != null)     value=rule.getSign() + rule.getState();
 else     value=rule.getState();
    if (matchStateToValue(state,value,rule.getCondition()) == true) {
      return true;
    }
  }
  logger.debug("Widget {} is not visible.",w.getLabel());
  return false;
}
