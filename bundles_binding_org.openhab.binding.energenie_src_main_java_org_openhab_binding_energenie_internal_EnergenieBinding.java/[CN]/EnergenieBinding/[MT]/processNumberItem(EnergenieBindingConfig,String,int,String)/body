{
  String stateResponseSearch="";
  int start=0, stop=0, divisor=1;
  valueTypeDef valueType=valueTypeDef.NONE;
  double value=0.0;
switch (pmsSocketId) {
case 1:
    stateResponseSearch="var V  = ";
  valueType=valueTypeDef.VOLTAGE;
start=9;
stop=20;
divisor=10;
break;
case 2:
stateResponseSearch="var I  = ";
valueType=valueTypeDef.CURRENT;
start=9;
stop=20;
divisor=100;
break;
case 3:
stateResponseSearch="var P=";
valueType=valueTypeDef.POWER;
start=6;
stop=20;
divisor=466;
break;
case 4:
stateResponseSearch="var E=";
valueType=valueTypeDef.ENERGY;
start=6;
stop=20;
divisor=25600;
break;
}
int findState=loginResponseString.lastIndexOf(stateResponseSearch);
if (findState > 0) {
logger.trace("searchstring {} found at position {}",stateResponseSearch,findState);
String slicedResponseTmp=loginResponseString.substring(findState + start,findState + stop);
logger.trace("transformed state response = {}",slicedResponseTmp);
String[] slicedResponse=slicedResponseTmp.split(";");
logger.trace("transformed state response = {} - {}",slicedResponse[0],slicedResponse[1]);
if (Double.parseDouble(slicedResponse[0]) / 1 == Double.parseDouble(slicedResponse[0])) {
value=Double.parseDouble(slicedResponse[0]) / divisor;
}
 else {
value=-1.0;
}
switch (valueType) {
case NONE:
break;
case VOLTAGE:
deviceConfig.setVoltage(value);
logger.trace("transformed state for item {} = {}",itemName,deviceConfig.getVoltage());
eventPublisher.postUpdate(itemName,deviceConfig.getVoltage());
break;
case CURRENT:
deviceConfig.setCurrent(value);
logger.trace("transformed state for item {} = {}",itemName,deviceConfig.getCurrent());
eventPublisher.postUpdate(itemName,deviceConfig.getCurrent());
break;
case POWER:
deviceConfig.setPower(value);
logger.trace("transformed state for item {} = {}",itemName,deviceConfig.getPower());
eventPublisher.postUpdate(itemName,deviceConfig.getPower());
break;
case ENERGY:
deviceConfig.setEnergy(value);
logger.trace("transformed state for item {} = {}",itemName,deviceConfig.getEnergy());
eventPublisher.postUpdate(itemName,deviceConfig.getEnergy());
break;
}
}
 else {
logger.trace("searchstring %s not found",stateResponseSearch);
}
}
