{
  String pmsIp=pmsIpConfig.get(pmsId);
  String pmsPw=pmsPasswordConfig.get(pmsId);
  String url="http://" + pmsIp + "/login.html";
  try {
    URL obj=new URL(url);
    HttpURLConnection con=(HttpURLConnection)obj.openConnection();
    con.setRequestProperty("User-Agent",USER_AGENT);
    con.setRequestMethod("GET");
    String urlParameters="pw=" + pmsPw;
    con.setDoOutput(true);
    DataOutputStream wr=new DataOutputStream(con.getOutputStream());
    wr.writeBytes(urlParameters);
    wr.flush();
    wr.close();
    int responseCode=con.getResponseCode();
    logger.trace("energenie: login to {} with password {}",pmsIp,pmsPw);
    logger.trace("energenie: sending 'POST' request to URL : {}",url);
    logger.trace("energenie: post parameters : {}",urlParameters);
    logger.trace("energenie: responseCode : {}",responseCode);
    BufferedReader in=new BufferedReader(new InputStreamReader(con.getInputStream()));
    String inputLine;
    StringBuffer responseString=new StringBuffer();
    while ((inputLine=in.readLine()) != null) {
      responseString.append(inputLine);
    }
    in.close();
    String loginResponseString=responseString.toString();
    String stateResponseSearch="var sockstates = ";
    int findState=loginResponseString.lastIndexOf(stateResponseSearch);
    if (findState != 0) {
      logger.trace("energenie: searchstring sockstates found at position {}",findState);
      String slicedResponse=loginResponseString.substring(findState + 18,findState + 25);
      logger.trace("energenie: transformed state response = {}",slicedResponse);
    }
 else {
      logger.trace("energenie: searchstring sockstates not found");
    }
  }
 catch (  Exception e) {
    logger.error("energenie: failed to logout from ip {}",pmsIp);
  }
}
