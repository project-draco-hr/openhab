{
  if (!TransportListener.isAtmosphereTransport((HttpServletRequest)resource.getRequest())) {
    Item item=getItem(itemname);
    if (item != null) {
      logger.debug("Received HTTP GET request at '{}'.",uriInfo.getPath());
      throw new WebApplicationException(Response.ok(item.getState().toString()).build());
    }
 else {
      logger.info("Received HTTP GET request at '{}' for the unknown item '{}'.",uriInfo.getPath(),itemname);
      throw new WebApplicationException(404);
    }
  }
  return new SuspendResponse.SuspendResponseBuilder<String>().scope(SCOPE.REQUEST).addListener(new ItemTransportListener()).outputComments(true).build();
}
