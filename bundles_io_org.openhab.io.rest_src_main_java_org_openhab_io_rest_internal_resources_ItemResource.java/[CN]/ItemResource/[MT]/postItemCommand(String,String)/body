{
  Item item=getItem(itemname);
  Command command=null;
  if (item != null) {
    if ("toggle".equalsIgnoreCase(value) && (item instanceof SwitchItem || item instanceof RollershutterItem)) {
      if (OnOffType.ON.equals(item.getStateAs(OnOffType.class)))       command=OnOffType.OFF;
      if (OnOffType.OFF.equals(item.getStateAs(OnOffType.class)))       command=OnOffType.ON;
      if (UpDownType.UP.equals(item.getStateAs(UpDownType.class)))       command=UpDownType.DOWN;
      if (UpDownType.DOWN.equals(item.getStateAs(UpDownType.class)))       command=UpDownType.UP;
    }
 else {
      command=TypeParser.parseCommand(item.getAcceptedCommandTypes(),value);
    }
    if (command != null) {
      logger.debug("Received HTTP POST request at '{}' with value '{}'.",uriInfo.getPath(),value);
      RESTApplication.getEventPublisher().postCommand(itemname,command);
      return Response.created(localUriInfo.getAbsolutePathBuilder().path("state").build()).build();
    }
 else {
      logger.warn("Received HTTP POST request at '{}' with an invalid status value '{}'.",uriInfo.getPath(),value);
      return Response.status(Status.BAD_REQUEST).build();
    }
  }
 else {
    logger.info("Received HTTP POST request at '{}' for the unknown item '{}'.",uriInfo.getPath(),itemname);
    throw new WebApplicationException(404);
  }
}
