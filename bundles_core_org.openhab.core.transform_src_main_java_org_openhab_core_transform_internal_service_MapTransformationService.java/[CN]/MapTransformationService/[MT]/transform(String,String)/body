{
  if (filename == null || source == null) {
    throw new TransformationException("the given parameters 'filename' and 'source' must not be null");
  }
  String basename=FilenameUtils.getBaseName(filename);
  String extension=FilenameUtils.getExtension(filename);
  String locale=Locale.getDefault().getLanguage();
  String basePath=ConfigDispatcher.getConfigFolder() + File.separator + TransformationActivator.TRANSFORM_FOLDER_NAME+ File.separator;
  String path=basePath + filename;
  String alternatePath=basePath + basename + "_"+ locale+ "."+ extension;
  File f=new File(alternatePath);
  if (f.exists()) {
    path=alternatePath;
  }
  logger.debug("Transformation file found '{}'",path);
  Reader reader=null;
  try {
    Properties properties=new Properties();
    reader=new FileReader(path);
    properties.load(reader);
    String target=properties.getProperty(source);
    if (target != null) {
      logger.debug("transformation resulted in '{}'",target);
      return target;
    }
 else {
      logger.warn("Could not find a mapping for '{}' in the file '{}'.",source,filename);
      return "";
    }
  }
 catch (  IOException e) {
    String message="opening file '" + filename + "' throws exception";
    logger.error(message,e);
    throw new TransformationException(message,e);
  }
 finally {
    IOUtils.closeQuietly(reader);
  }
}
