{
  for (  Object key : req.getParameterMap().keySet()) {
    String itemName=key.toString();
    if (!itemName.startsWith("__")) {
      String commandName=req.getParameter(itemName);
      EventPublisher publisher=service.getEventPublisher();
      ItemRegistry registry=service.getItemRegistry();
      try {
        Item item=registry.getItem(itemName);
        if (item instanceof SwitchItem && commandName.equals("TOGGLE")) {
          commandName=item.getState().equals(OnOffType.ON) ? "OFF" : "ON";
        }
        Command command=TypeParser.parseCommand(item.getAcceptedCommandTypes(),commandName);
        if (command != null) {
          publisher.sendCommand(itemName,command);
        }
 else {
          logger.warn("Received unknown command '{}' for item '{}'",commandName,itemName);
        }
      }
 catch (      ItemNotFoundException e) {
        logger.warn("Received command '{}' for item '{}', but the item does not exist in the registry",commandName,itemName);
      }
catch (      ItemNotUniqueException e) {
        logger.warn("Received command '{}' for an ambiguous item name.",commandName,e);
      }
    }
  }
}
