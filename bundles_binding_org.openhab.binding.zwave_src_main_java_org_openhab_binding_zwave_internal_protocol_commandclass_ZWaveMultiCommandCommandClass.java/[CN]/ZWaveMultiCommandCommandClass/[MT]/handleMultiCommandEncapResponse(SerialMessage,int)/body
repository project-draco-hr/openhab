{
  logger.trace("Process Multi-command Encapsulation");
  int classCnt=serialMessage.getMessagePayloadByte(offset++);
  logger.debug("======== classCnt={}",classCnt);
  for (int c=0; c < classCnt; c++) {
    logger.debug("======= Processing class {}",c);
    logger.debug("======= length is {},",serialMessage.getMessagePayloadByte(offset));
    logger.debug("======= class is {},",serialMessage.getMessagePayloadByte(offset + 1));
    CommandClass commandClass;
    ZWaveCommandClass zwaveCommandClass;
    int commandClassCode=serialMessage.getMessagePayloadByte(offset + 1);
    commandClass=CommandClass.getCommandClass(commandClassCode);
    if (commandClass == null) {
      logger.error(String.format("NODE %d: Unsupported command class 0x%02x",this.getNode().getNodeId(),commandClassCode));
      return;
    }
    zwaveCommandClass=this.getNode().getCommandClass(commandClass);
    if (zwaveCommandClass == null) {
      logger.error(String.format("NODE %d: CommandClass %s (0x%02x) not implemented.",this.getNode().getNodeId(),commandClass.getLabel(),commandClassCode));
      return;
    }
    logger.debug(String.format("NODE %d: Calling handleApplicationCommandRequest.",this.getNode().getNodeId()));
    zwaveCommandClass.handleApplicationCommandRequest(serialMessage,offset + 2,1);
    offset+=serialMessage.getMessagePayloadByte(offset);
  }
}
