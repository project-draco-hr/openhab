{
  try {
    CommPortIdentifier portIdentifier=CommPortIdentifier.getPortIdentifier(device);
    CommPort commPort=portIdentifier.open(this.getClass().getName(),2000);
    serialPort=(SerialPort)commPort;
    setSerialPortParameters(baudrate);
    in=serialPort.getInputStream();
    out=new DataOutputStream(serialPort.getOutputStream());
    out.flush();
    buffer=new CircularByteBuffer(Byte.MAX_VALUE * Byte.MAX_VALUE + 2 * Byte.MAX_VALUE);
    byteStreamPipe=new ByteStreamPipe(in,buffer);
    byteStreamPipe.startTask();
  }
 catch (  Exception e) {
    throw new RuntimeException("Could not init comm port",e);
  }
}
