{
  if (!children.isEmpty() && !(children.get(0).eContainer() instanceof Frame || children.get(0).eContainer() instanceof Sitemap)) {
    String frameSnippet=service.getSnippet("frame");
    frameSnippet=frameSnippet.replace("%label%","");
    snippet=snippet.replace("%children%",frameSnippet);
  }
  String[] parts=snippet.split("%children%");
  sb.append(parts[0]);
  if (parts.length == 2) {
    for (    Widget w : children) {
      processWidget(w,sb);
    }
    sb.append(parts[1]);
  }
 else   if (parts.length > 2) {
    logger.error("Snippet contains multiple %children% sections, but only one is allowed!");
  }
}
