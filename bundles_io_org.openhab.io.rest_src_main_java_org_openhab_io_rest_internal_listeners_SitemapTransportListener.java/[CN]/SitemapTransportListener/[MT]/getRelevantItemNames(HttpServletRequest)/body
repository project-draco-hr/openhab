{
  String pathInfo=request.getPathInfo();
  if (pathInfo.startsWith("/" + SitemapResource.PATH_SITEMAPS)) {
    String[] pathSegments=pathInfo.substring(1).split("/");
    if (pathSegments.length >= 3) {
      String sitemapName=pathSegments[1];
      String pageName=pathSegments[2];
      Sitemap sitemap=(Sitemap)RESTApplication.getModelRepository().getModel(sitemapName + ".sitemap");
      if (sitemap != null) {
        List<Widget> children=null;
        if (pageName.equals(sitemapName)) {
          children=sitemap.getChildren();
        }
 else {
          Widget widget=RESTApplication.getItemUIRegistry().getWidget(sitemap,pageName);
          if (widget instanceof LinkableWidget) {
            LinkableWidget page=(LinkableWidget)widget;
            children=RESTApplication.getItemUIRegistry().getChildren(page);
          }
        }
        if (children != null) {
          return getRelevantItemNamesForWidgets(children);
        }
      }
    }
  }
  return new HashSet<String>();
}
