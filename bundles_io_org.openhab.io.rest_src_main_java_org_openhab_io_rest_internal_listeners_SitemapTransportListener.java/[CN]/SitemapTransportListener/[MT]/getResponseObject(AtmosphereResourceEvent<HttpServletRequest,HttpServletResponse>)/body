{
  HttpServletRequest request=event.getResource().getRequest();
  String pathInfo=request.getPathInfo();
  String responseType=getResponseType(request);
  if (responseType != null) {
    URI basePath=UriBuilder.fromUri(request.getScheme() + "://" + request.getServerName()+ ":"+ request.getServerPort()+ (request.getContextPath().equals("null") ? "" : request.getContextPath())+ RESTApplication.REST_SERVLET_ALIAS+ "/").build();
    if (pathInfo.startsWith("/" + SitemapResource.PATH_SITEMAPS)) {
      String[] pathSegments=pathInfo.substring(1).split("/");
      if (pathSegments.length >= 3) {
        String sitemapName=pathSegments[1];
        String pageId=pathSegments[2];
        Sitemap sitemap=(Sitemap)RESTApplication.getModelRepository().getModel(sitemapName + ".sitemap");
        if (sitemap != null) {
          PageBean pageBean=SitemapResource.getPageBean(sitemapName,pageId,basePath);
          Object responseObject=responseType.equals(MediaTypeHelper.APPLICATION_X_JAVASCRIPT) ? new JSONWithPadding(pageBean,getQueryParam(request,"callback")) : pageBean;
          return Response.ok(responseObject,responseType).build();
        }
      }
    }
  }
  return null;
}
