{
  ItemUIRegistry itemUIRegistry=RESTApplication.getItemUIRegistry();
  WidgetBean bean=new WidgetBean();
  if (widget.getItem() != null) {
    Item item=ItemResource.getItem(widget.getItem());
    if (item != null) {
      bean.item=ItemResource.createItemBean(item,false,UriBuilder.fromUri(uri).build().toASCIIString());
    }
  }
  bean.icon=itemUIRegistry.getIcon(widget);
  bean.label=itemUIRegistry.getLabel(widget);
  bean.type=widget.eClass().getName();
  if (widget instanceof LinkableWidget) {
    LinkableWidget linkableWidget=(LinkableWidget)widget;
    EList<Widget> children=itemUIRegistry.getChildren(linkableWidget);
    if (widget instanceof Frame) {
      for (      Widget child : children) {
        bean.widgets.add(createWidgetBean(sitemapName,child,drillDown,uri));
      }
    }
 else     if (children.size() > 0) {
      String pageName=itemUIRegistry.getWidgetId(linkableWidget);
      bean.linkedPage=createPageBean(sitemapName,itemUIRegistry.getLabel(widget),itemUIRegistry.getIcon(widget),pageName,drillDown ? itemUIRegistry.getChildren(linkableWidget) : null,drillDown,uri);
    }
  }
  if (widget instanceof Switch) {
    Switch switchWidget=(Switch)widget;
    for (    Mapping mapping : switchWidget.getMappings()) {
      MappingBean mappingBean=new MappingBean();
      mappingBean.command=mapping.getCmd();
      mappingBean.label=mapping.getLabel();
      bean.mappings.add(mappingBean);
    }
  }
  if (widget instanceof Selection) {
    Selection selectionWidget=(Selection)widget;
    for (    Mapping mapping : selectionWidget.getMappings()) {
      MappingBean mappingBean=new MappingBean();
      mappingBean.command=mapping.getCmd();
      mappingBean.label=mapping.getLabel();
      bean.mappings.add(mappingBean);
    }
  }
  if (widget instanceof Slider) {
    Slider sliderWidget=(Slider)widget;
    bean.sendFrequency=sliderWidget.getFrequency();
    bean.switchSupport=sliderWidget.isSwitchEnabled();
  }
  if (widget instanceof List) {
    List listWidget=(List)widget;
    bean.separator=listWidget.getSeparator();
  }
  if (widget instanceof Image) {
    Image imageWidget=(Image)widget;
    bean.url=imageWidget.getUrl();
    if (imageWidget.getRefresh() > 0) {
      bean.refresh=imageWidget.getRefresh();
    }
  }
  if (widget instanceof Video) {
    Video videoWidget=(Video)widget;
    bean.url=videoWidget.getUrl();
  }
  if (widget instanceof Webview) {
    Webview webViewWidget=(Webview)widget;
    bean.url=webViewWidget.getUrl();
    bean.height=webViewWidget.getHeight();
  }
  if (widget instanceof Chart) {
    Chart chartWidget=(Chart)widget;
    bean.service=chartWidget.getService();
    bean.period=chartWidget.getPeriod();
    if (chartWidget.getRefresh() > 0) {
      bean.refresh=chartWidget.getRefresh();
    }
  }
  if (widget instanceof Setpoint) {
    Setpoint setpointWidget=(Setpoint)widget;
    bean.minValue=setpointWidget.getMinValue();
    bean.maxValue=setpointWidget.getMaxValue();
    bean.step=setpointWidget.getStep();
  }
  return bean;
}
