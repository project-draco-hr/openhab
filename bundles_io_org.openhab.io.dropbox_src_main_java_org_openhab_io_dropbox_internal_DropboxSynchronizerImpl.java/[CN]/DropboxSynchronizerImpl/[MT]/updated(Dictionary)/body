{
  if (config != null) {
    isProperlyConfigured=false;
    String appKeyString=(String)config.get("appkey");
    if (isNotBlank(appKeyString)) {
      DropboxSynchronizerImpl.appKey=appKeyString;
    }
    String appSecretString=(String)config.get("appsecret");
    if (isNotBlank(appSecretString)) {
      DropboxSynchronizerImpl.appSecret=appSecretString;
    }
    if (isBlank(DropboxSynchronizerImpl.appKey) || isBlank(DropboxSynchronizerImpl.appSecret)) {
      throw new ConfigurationException("dropbox:appkey","The parameters 'appkey' or 'appsecret' are missing! Please refer to your 'openhab.cfg'");
    }
    String initializeString=(String)config.get("initialize");
    if (isNotBlank(initializeString)) {
      DropboxSynchronizerImpl.initializeDropboxOnReset=BooleanUtils.toBoolean(initializeString);
    }
    String contentDirString=(String)config.get("contentdir");
    if (isNotBlank(contentDirString)) {
      DropboxSynchronizerImpl.contentDir=contentDirString;
    }
    String uploadIntervalString=(String)config.get("uploadInterval");
    if (isNotBlank(uploadIntervalString)) {
      DropboxSynchronizerImpl.uploadInterval=uploadIntervalString;
    }
    String downloadIntervalString=(String)config.get("downloadInterval");
    if (isNotBlank(downloadIntervalString)) {
      DropboxSynchronizerImpl.downloadInterval=downloadIntervalString;
    }
    String syncModeString=(String)config.get("syncmode");
    if (isNotBlank(syncModeString)) {
      try {
        DropboxSynchronizerImpl.syncMode=DropboxSyncMode.valueOf(syncModeString.toUpperCase());
      }
 catch (      IllegalArgumentException iae) {
        throw new ConfigurationException("dropbox:syncmode","Unknown SyncMode '" + syncModeString + "'. Valid SyncModes are 'DROPBOX_TO_LOCAL', 'LOCAL_TO_DROPBOX' and 'BIDIRECTIONAL'.");
      }
    }
    String uploadFilterString=(String)config.get("uploadfilter");
    if (isNotBlank(uploadFilterString)) {
      String[] newFilterElements=uploadFilterString.split(",");
      uploadFilterElements=Arrays.asList(newFilterElements);
    }
    String downloadFilterString=(String)config.get("downloadfilter");
    if (isNotBlank(downloadFilterString)) {
      String[] newFilterElements=downloadFilterString.split(",");
      downloadFilterElements=Arrays.asList(newFilterElements);
    }
    isProperlyConfigured=true;
    activate();
  }
}
