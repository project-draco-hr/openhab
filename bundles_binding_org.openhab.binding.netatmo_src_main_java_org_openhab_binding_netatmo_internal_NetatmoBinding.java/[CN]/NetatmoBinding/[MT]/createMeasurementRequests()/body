{
  final Map<String,MeasurementRequest> requests=new HashMap<String,MeasurementRequest>();
  for (  final NetatmoBindingProvider provider : this.providers) {
    for (    final String itemName : provider.getItemNames()) {
      final String userid=provider.getUserid(itemName);
      final String deviceId=provider.getDeviceId(itemName);
      final String moduleId=provider.getModuleId(itemName);
      final NetatmoMeasureType measureType=provider.getMeasureType(itemName);
      final String requestKey=createKey(deviceId,moduleId);
switch (measureType) {
case TEMPERATURE:
case CO2:
case HUMIDITY:
case NOISE:
case PRESSURE:
        OAuthCredentials oauthCredentials=getOAuthCredentials(userid);
      if (oauthCredentials != null) {
        if (!requests.containsKey(requestKey)) {
          requests.put(requestKey,new MeasurementRequest(oauthCredentials.accessToken,deviceId,moduleId));
        }
        requests.get(requestKey).addMeasure(measureType);
        break;
      }
default :
    break;
}
}
}
return requests.values();
}
