{
  if (itemName != null) {
    JointSpaceBindingProvider provider=findFirstMatchingBindingProvider(itemName,command.toString());
    if (provider == null) {
      logger.warn("Doesn't find matching binding provider [itemName={}, command={}]",itemName,command);
      return;
    }
    logger.debug("Received command (item='{}', state='{}', class='{}')",new Object[]{itemName,command.toString(),command.getClass().toString()});
    String tmp=null;
    tmp=provider.getTVCommand(itemName,command.toString());
    if (tmp == null) {
      if (command instanceof HSBType) {
        tmp=provider.getTVCommand(itemName,"HSB");
      }
 else       if (command instanceof DecimalType) {
        tmp=provider.getTVCommand(itemName,"DEC");
      }
 else {
        tmp=provider.getTVCommand(itemName,"*");
      }
    }
    if (tmp == null) {
      logger.warn("Unrecognized command \"" + command.toString() + "\"");
      return;
    }
    if (tmp.contains("key")) {
      String[] commandlist=tmp.split("\\.");
      if (commandlist.length != 2) {
        logger.warn("wrong number of arguments for key command \"" + tmp + "\". Should be key.X");
        return;
      }
      String key=commandlist[1];
      sendTVCommand(key,ip + ":" + port);
    }
 else     if (tmp.contains("ambilight")) {
      String[] commandlist=tmp.split("\\.");
      String[] layer=command2LayerString(tmp);
      if (commandlist.length < 2) {
        logger.warn("wrong number of arguments for ambilight command \"" + tmp + "\". Should be at least ambilight.color, ambilight.mode.X, etc...");
        return;
      }
      if (commandlist[1].contains("color")) {
        setAmbilightColor(ip + ":" + port,command,layer);
      }
 else       if (commandlist[1].contains("mode")) {
        if (commandlist.length != 3) {
          logger.warn("wrong number of arguments for ambilight.mode command \"" + tmp + "\". Should be ambilight.mode.internal, ambilight.mode.manual, ambilight.mode.expert");
          return;
        }
        setAmbilightMode(commandlist[2],ip + ":" + port);
      }
    }
 else     if (tmp.contains("volume")) {
      sendVolume(ip + ":" + port,command);
    }
 else {
      logger.warn("Unrecognized tv command \"" + tmp + "\". Only key.X or ambilight[].X is supported");
      return;
    }
  }
}
