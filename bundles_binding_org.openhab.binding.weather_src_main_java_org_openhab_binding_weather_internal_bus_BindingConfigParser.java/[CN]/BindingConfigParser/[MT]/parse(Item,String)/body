{
  bindingConfig=StringUtils.trimToEmpty(bindingConfig);
  bindingConfig=StringUtils.removeStart(bindingConfig,"{");
  bindingConfig=StringUtils.removeEnd(bindingConfig,"}");
  String[] entries=bindingConfig.split("[,]");
  WeatherBindingConfigHelper helper=new WeatherBindingConfigHelper();
  for (  String entry : entries) {
    String[] entryParts=StringUtils.trimToEmpty(entry).split("[=]");
    if (entryParts.length != 2) {
      throw new BindingConfigParseException("A bindingConfig must have a key and a value");
    }
    String key=StringUtils.trim(entryParts[0]);
    String value=StringUtils.trim(entryParts[1]);
    value=StringUtils.removeStart(value,"\"");
    value=StringUtils.removeEnd(value,"\"");
    try {
      helper.getClass().getDeclaredField(key).set(helper,value);
    }
 catch (    Exception e) {
      throw new BindingConfigParseException("Could not set value " + value + " for attribute "+ key);
    }
  }
  if (!helper.isValid()) {
    throw new BindingConfigParseException("Invalid binding: " + bindingConfig);
  }
  WeatherBindingConfig weatherConfig=null;
  if (helper.isForecast()) {
    Integer forecast=parseInteger(helper.forecast,bindingConfig);
    if (forecast < 0) {
      throw new BindingConfigParseException("Invalid binding, forecast must be >= 0: " + bindingConfig);
    }
    weatherConfig=new ForecastBindingConfig(helper.locationId,forecast,helper.type,helper.property);
  }
 else {
    weatherConfig=new WeatherBindingConfig(helper.locationId,helper.type,helper.property);
  }
  if (context.getConfig().getLocationConfig(weatherConfig.getLocationId()) == null) {
    throw new BindingConfigParseException("Invalid binding, unknown locationId: " + bindingConfig);
  }
  if (!PropertyUtils.hasProperty(new Weather(null),weatherConfig.getWeatherProperty())) {
    throw new BindingConfigParseException("Invalid binding, unknown type or property: " + bindingConfig);
  }
  return weatherConfig;
}
