{
  String itemName=(String)event.getProperty("item");
  String topic=event.getTopic();
  String[] topicParts=topic.split(TOPIC_SEPERATOR);
  if (!(topicParts.length > 2) && !topicParts[0].equals(TOPIC_PREFIX)) {
    return;
  }
  String operation=topicParts[1];
  if (operation.equals(REFRESH_COMMAND)) {
    refresh(itemName);
  }
  if (operation.equals(UPDATE_COMMAND)) {
    DataType newState=(DataType)event.getProperty("state");
    if (newState != null)     receiveUpdate(itemName,newState);
  }
  if (operation.equals(SEND_COMMAND)) {
    CommandType command=(CommandType)event.getProperty("command");
    if (command != null)     receiveCommand(itemName,command);
  }
}
