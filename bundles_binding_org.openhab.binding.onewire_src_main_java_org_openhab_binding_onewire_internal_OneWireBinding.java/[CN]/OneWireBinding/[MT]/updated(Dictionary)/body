{
  if (config != null) {
    ip=(String)config.get("ip");
    String portString=(String)config.get("port");
    if (StringUtils.isNotBlank(portString)) {
      port=Integer.parseInt(portString);
    }
    String refreshIntervalString=(String)config.get("refresh");
    if (StringUtils.isNotBlank(refreshIntervalString)) {
      refreshInterval=Long.parseLong(refreshIntervalString);
    }
    String retryString=(String)config.get("retry");
    if (StringUtils.isNotBlank(retryString)) {
      retry=Integer.parseInt(retryString);
    }
    String tempScaleString=(String)config.get("tempscale");
    if (StringUtils.isNotBlank(tempScaleString)) {
      try {
        tempScale=OwTemperatureScale.valueOf("OWNET_TS_" + tempScaleString);
      }
 catch (      IllegalArgumentException iae) {
        throw new ConfigurationException("onewire:tempscale","Unknown temperature scale '" + tempScaleString + "'. Valid values are CELSIUS, FAHRENHEIT, KELVIN or RANKIN.");
      }
    }
    connect(ip,port);
    setProperlyConfigured(true);
  }
}
