{
  boolean successful=false;
  boolean validCommand=false;
  String command=apiCode.getCode();
  String data="";
switch (apiCode) {
case NetworkLogin:
    if (password == null || password.length() < 1 || password.length() > 6) {
      logger.error("sendCommand(): Password is invalid, must be between 1 and 6 chars",password);
      validCommand=false;
    }
 else {
      data=password;
      validCommand=true;
    }
  break;
case Poll:
case StatusReport:
case LabelsRequest:
case DumpZoneTimers:
validCommand=true;
break;
case SetTimeDate:
DateFormat dateFormat=new SimpleDateFormat("hhmmMMDDYY");
String dateTime=apiData[0];
try {
dateFormat.parse(dateTime);
data=apiData[0];
validCommand=true;
}
 catch (ParseException parseException) {
logger.error("sendCommand(): Could not format date: " + dateTime + " to hhmmMMDDYY format: ",parseException);
validCommand=false;
}
break;
case CommandOutputControl:
if (apiData[0] == null || !apiData[0].matches("[1-8]")) {
logger.error("sendCommand(): Partition number must be a single character string from 1 to 8, it was: " + apiData[0]);
validCommand=false;
break;
}
if (apiData[1] == null || !apiData[1].matches("[1-4]")) {
logger.error("sendCommand(): Output number must be a single character string from 1 to 4, it was: " + apiData[1]);
validCommand=false;
}
 else {
data=apiData[0];
validCommand=true;
}
break;
case KeepAlive:
case PartitionArmControlAway:
case PartitionArmControlStay:
case PartitionArmControlZeroEntryDelay:
if (apiData[0] == null || !apiData[0].matches("[1-8]")) {
logger.error("sendCommand(): Partition number must be a single character string from 1 to 8, it was: {}",apiData[0]);
validCommand=false;
}
 else {
data=apiData[0];
validCommand=true;
}
break;
case PartitionArmControlWithUserCode:
case PartitionDisarmControl:
if (apiData[0] == null || !apiData[0].matches("[1-8]")) {
logger.error("sendCommand(): Partition number must be a single character string from 1 to 8, it was: {}",apiData[0]);
validCommand=false;
break;
}
if (dscAlarmUserCode == null || dscAlarmUserCode.length() < 4 || dscAlarmUserCode.length() > 6) {
logger.error("sendCommand(): User Code is invalid, must be between 4 and 6 chars: {}",dscAlarmUserCode);
validCommand=false;
}
 else {
data=apiData[0] + dscAlarmUserCode;
validCommand=true;
}
break;
case TimeStampControl:
case TimeDateBroadcastControl:
case TemperatureBroadcastControl:
case VirtualKeypadControl:
if (apiData[0] == null || !apiData[0].matches("[0-1]")) {
logger.error("sendCommand(): Value must be a single character string of 0 or 1: {}",apiData[0]);
validCommand=false;
}
 else {
data=apiData[0];
validCommand=true;
}
break;
case TriggerPanicAlarm:
if (apiData[0] == null || !apiData[0].matches("[1-8]")) {
logger.error("sendCommand(): Partition number must be a single character string from 1 to 8, it was: {}",apiData[0]);
validCommand=false;
break;
}
if (apiData[1] == null || !apiData[1].matches("[1-3]")) {
logger.error("sendCommand(): FAPcode must be a single character string from 1 to 3, it was: {}",apiData[1]);
}
 else {
data=apiData[0] + apiData[1];
validCommand=true;
}
break;
case KeyStroke:
if (apiData[0] == null || apiData[0].length() != 1 || !apiData[0].matches("[0-9]|A|#|\\*")) {
logger.error("sendCommand(): \'keystroke\' must be a single character string from 0 to 9, *, #, or A, it was: {}",apiData[0]);
}
 else {
data=apiData[0];
validCommand=true;
}
break;
case KeySequence:
if (apiData[0] == null || apiData[0].length() > 6 || !apiData[0].matches("(\\d|#|\\*)+")) {
logger.error("sendCommand(): \'keysequence\' must be a string of up to 6 characters consiting of 0 to 9, *, or #, it was: {}",apiData[0]);
}
 else {
data=apiData[0];
validCommand=true;
}
break;
case CodeSend:
if (apiData[0] == null || apiData[0].length() < 4 || apiData[0].length() > 6) {
logger.error("sendCommand(): Access Code is invalid, must be between 4 and 6 chars: {}",apiData[0]);
}
 else {
data=apiData[0];
validCommand=true;
}
break;
default :
validCommand=false;
}
if (validCommand) {
APICommand apiCommand=new APICommand();
apiCommand.setAPICommand(command,data);
dscAlarmConnector.write(apiCommand.toString());
successful=true;
}
 else logger.error("sendCommand(): Command Not Sent - Invalid!");
return successful;
}
