{
  double dist=-1;
  if ((this.state != UnDefType.UNDEF) && (away != null)) {
    CoordinateType me=(CoordinateType)this.state;
    double dLat=Math.pow(Math.sin(Math.toRadians(away.getLatitude().doubleValue() - me.getLatitude().doubleValue()) / 2),2);
    double dLng=Math.pow(Math.sin(Math.toRadians(away.getLongitude().doubleValue() - me.getLongitude().doubleValue()) / 2),2);
    double a=dLat + Math.cos(Math.toRadians(me.getLatitude().doubleValue())) * Math.cos(Math.toRadians(away.getLatitude().doubleValue())) * dLng;
    dist=EARTH_RADIUS_METER * Math.atan2(Math.sqrt(a),Math.sqrt(1 - a));
  }
  return new DecimalType(dist);
}
