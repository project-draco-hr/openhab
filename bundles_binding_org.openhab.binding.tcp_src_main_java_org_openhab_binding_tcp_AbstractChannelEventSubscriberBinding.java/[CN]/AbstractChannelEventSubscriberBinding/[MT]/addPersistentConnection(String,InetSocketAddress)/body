{
  if (selector != null) {
    if (getActiveChannelCount(socketAddress) == 0) {
      C networkChannel=null;
      networkChannel=openChannel();
      networkChannel.configureBlocking(false);
      connectChannel(networkChannel,socketAddress);
      setKeepAliveChannel(networkChannel,true);
      ChannelTracker newTracker=new ChannelTracker();
      newTracker.referers.add(reference);
      newTracker.host=socketAddress.getAddress().getHostAddress();
      newTracker.port=socketAddress.getPort();
      newTracker.timeOfSocketConnection=System.currentTimeMillis();
      channelTrackers.put(networkChannel,newTracker);
      selectorLock.lock();
      selector.wakeup();
      ((SelectableChannel)networkChannel).register(selector,networkChannel.validOps());
      selectorLock.unlock();
      configurePersistentConnection(networkChannel);
      return networkChannel;
    }
 else {
      for (      C networkChannel : channelTrackers.keySet()) {
        if (channelTrackers.get(networkChannel).host == socketAddress.getHostName() && channelTrackers.get(networkChannel).port == socketAddress.getPort()) {
          if (!channelTrackers.get(networkChannel).referers.contains(reference)) {
            channelTrackers.get(networkChannel).referers.add(reference);
          }
          return networkChannel;
        }
      }
      return null;
    }
  }
 else   return null;
}
