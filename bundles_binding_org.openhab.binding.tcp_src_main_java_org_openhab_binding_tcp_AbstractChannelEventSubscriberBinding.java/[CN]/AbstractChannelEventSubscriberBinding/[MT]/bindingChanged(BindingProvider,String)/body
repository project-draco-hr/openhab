{
  List<C> socketChannels=getActiveChannels(itemName);
  List<InetSocketAddress> socketAddresses=((P)provider).getInetSocketAddresses(itemName);
  ListIterator<C> listIterator=socketChannels.listIterator();
  while (listIterator.hasNext()) {
    C networkChannel=listIterator.next();
    if (!socketAddresses.contains(new InetSocketAddress(channelTrackers.get(networkChannel).host,channelTrackers.get(networkChannel).port)) && isConnectedChannel(networkChannel)) {
      try {
        removePersistentConnection(itemName,networkChannel);
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
  ListIterator<InetSocketAddress> addrIterator=socketAddresses.listIterator();
  while (addrIterator.hasNext()) {
    InetSocketAddress inetSocketAddress=addrIterator.next();
    boolean channelExists=false;
    ListIterator<C> subIterator=socketChannels.listIterator();
    while (subIterator.hasNext()) {
      C networkChannel=subIterator.next();
      if (channelTrackers.get(networkChannel).host.equals(inetSocketAddress.getHostName()) && channelTrackers.get(networkChannel).port == inetSocketAddress.getPort()) {
        channelExists=true;
        break;
      }
    }
    if (!channelExists) {
      try {
        addPersistentConnection(itemName,inetSocketAddress);
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
}
