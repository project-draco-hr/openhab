{
  if (initialized) {
    if (!isConnected())     connectToDatabase();
    if (isConnected()) {
      String tableName=getTable(item);
      if (tableName == null) {
        logger.error("Unable to store item '{}'.",item.getName());
        return;
      }
      String sqlCmd=null;
      Statement statement=null;
      try {
        statement=connection.createStatement();
        sqlCmd=new String("INSERT INTO " + tableName + " (TIME, VALUE) VALUES(NOW(),'"+ item.getState().toString()+ "');");
        statement.executeUpdate(sqlCmd);
        logger.debug("SQL: Stored item '{}' as '{}'[{}] in SQL database at {}.",item.getName(),item.getState().toString(),item.getState().toString(),(new java.util.Date()).toString());
        logger.debug("SQL: {}",sqlCmd);
        errCnt=0;
      }
 catch (      Exception e) {
        errCnt++;
        logger.error("SQL: Could not store item '{}' in database with statement '{}': {}",item.getName(),sqlCmd,e.getMessage());
      }
 finally {
        if (statement != null) {
          try {
            statement.close();
          }
 catch (          Exception hidden) {
          }
        }
      }
    }
 else {
      logger.warn("SQL: No connection to database. Can not persist item '{}'! Will retry connecting to database next time.",item);
    }
  }
}
