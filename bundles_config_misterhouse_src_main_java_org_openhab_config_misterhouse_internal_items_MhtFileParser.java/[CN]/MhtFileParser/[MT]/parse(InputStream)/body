{
  List<GenericItem> items=new ArrayList<GenericItem>();
  Map<String,GroupItem> groups=new HashMap<String,GroupItem>();
  LineIterator iterator=IOUtils.lineIterator(is,"UTF-8");
  checkCorrectFormat(iterator);
  while (iterator.hasNext()) {
    String line=iterator.nextLine();
    Map<String,?> lineContents=parseLine(line,groups);
    if (lineContents != null && !lineContents.isEmpty()) {
      GenericItem item=(GenericItem)lineContents.get(MAP_ITEM);
      items.add(item);
      allItems.add(item.getName());
    }
  }
  return items.toArray(new GenericItem[items.size()]);
}
