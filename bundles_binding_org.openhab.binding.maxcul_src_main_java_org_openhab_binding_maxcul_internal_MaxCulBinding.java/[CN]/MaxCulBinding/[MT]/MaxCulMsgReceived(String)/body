{
  logger.debug("Received data from CUL: " + data);
  MaxCulMsgType msgType=BaseMsg.getMsgType(data);
  if (((pairMode && BaseMsg.isForUs(data,this.BROADCAST_ADDRESS)) || BaseMsg.isForUs(data,this.srcAddr)) && msgType == MaxCulMsgType.PAIR_PING) {
    logger.debug("Got PAIR_PING message");
    PairPingMsg pkt=new PairPingMsg(data);
    if (pkt.len > 0 && (pkt.dstAddrStr.compareToIgnoreCase(this.srcAddr) == 0 || (pkt.dstAddrStr.compareToIgnoreCase(BROADCAST_ADDRESS) == 0))) {
      Collection<MaxCulBindingConfig> bindingConfigs=getBindingsBySerial(pkt.serial);
      for (      MaxCulBindingConfig bc : bindingConfigs)       bc.setPairedInfo(pkt.srcAddrStr);
      messageHandler.sendPairPong(pkt.srcAddrStr);
    }
 else {
      logger.debug("Got pairing message for another controller");
    }
  }
 else {
switch (msgType) {
case WALL_THERMOSTAT_CONTROL:
      WallThermostatControlMsg wallThermCtrlMsg=new WallThermostatControlMsg(data);
    wallThermCtrlMsg.printMessage();
  if (BaseMsg.isForUs(data,this.srcAddr))   this.messageHandler.sendAck(wallThermCtrlMsg);
break;
case SET_TEMPERATURE:
SetTemperatureMsg setTempMsg=new SetTemperatureMsg(data);
setTempMsg.printMessage();
for (MaxCulBindingProvider provider : super.providers) {
Collection<MaxCulBindingConfig> bindingConfigs=provider.getConfigsForRadioAddr(setTempMsg.srcAddrStr);
for (MaxCulBindingConfig bc : bindingConfigs) {
if (bc.feature == MaxCulFeature.THERMOSTAT) {
String itemName=provider.getItemNameForConfig(bc);
eventPublisher.postUpdate(itemName,new DecimalType(setTempMsg.getDesiredTemperature()));
}
}
}
this.messageHandler.sendAck(setTempMsg);
break;
default :
logger.debug("Unhandled message type " + msgType.toString());
break;
}
}
}
