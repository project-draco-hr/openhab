{
  logger.debug("Received data from CUL: " + data);
  MaxCulMsgType msgType=BaseMsg.getMsgType(data);
  if (((pairMode && isBroadcast) || BaseMsg.isForUs(data,this.srcAddr)) && msgType == MaxCulMsgType.PAIR_PING) {
    logger.debug("Got PAIR_PING message");
    PairPingMsg pkt=new PairPingMsg(data);
    Collection<MaxCulBindingConfig> bindingConfigs=getBindingsBySerial(pkt.serial);
    for (    MaxCulBindingConfig bc : bindingConfigs)     bc.setPairedInfo(pkt.srcAddrStr);
    PairingInitialisationSequence ps=new PairingInitialisationSequence(this.DEFAULT_GROUP_ID,this.tzStr,messageHandler);
    messageHandler.startSequence(ps,pkt);
  }
 else {
switch (msgType) {
case WALL_THERMOSTAT_CONTROL:
      WallThermostatControlMsg wallThermCtrlMsg=new WallThermostatControlMsg(data);
    wallThermCtrlMsg.printMessage();
  if (BaseMsg.isForUs(data,this.srcAddr))   this.messageHandler.sendAck(wallThermCtrlMsg);
break;
case SET_TEMPERATURE:
SetTemperatureMsg setTempMsg=new SetTemperatureMsg(data);
setTempMsg.printMessage();
for (MaxCulBindingProvider provider : super.providers) {
Collection<MaxCulBindingConfig> bindingConfigs=provider.getConfigsForRadioAddr(setTempMsg.srcAddrStr);
for (MaxCulBindingConfig bc : bindingConfigs) {
if (bc.feature == MaxCulFeature.THERMOSTAT) {
String itemName=provider.getItemNameForConfig(bc);
eventPublisher.postUpdate(itemName,new DecimalType(setTempMsg.getDesiredTemperature()));
}
}
}
this.messageHandler.sendAck(setTempMsg);
break;
default :
logger.debug("Unhandled message type " + msgType.toString());
break;
}
}
}
