{
  logger.debug("Open connection");
  String soapQuery="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">" + "<soapenv:Body>"+ " <authenticate1 xmlns=\"utcs\">"+ "  <password>" + password + "</password>"+ "  <username>"+ username+ "</username>"+ "  <application>treeview</application>"+ " </authenticate1>"+ "</soapenv:Body>"+ "</soapenv:Envelope>";
  setConnectionState(ConnectionState.CONNECTING);
  authclient=new IhcHttpClient();
  authclient.openConnection("https://" + ip + "/ws/AuthenticationService",timeout);
  String response=authclient.sendQuery(soapQuery,timeout);
  String strLoginWasSuccessful=parseValue(response,"/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:authenticate2/ns1:loginWasSuccessful");
  boolean loginWasSuccessfull=Boolean.parseBoolean(strLoginWasSuccessful);
  if (loginWasSuccessfull != true) {
    setConnectionState(ConnectionState.DISCONNECTED);
    String strLoginFailedDueToConnectionRestrictions=parseValue(response,"/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:authenticate2/ns1:loginFailedDueToConnectionRestrictions");
    String strLoginFailedDueToInsufficientUserRights=parseValue(response,"/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:authenticate2/ns1:loginFailedDueToInsufficientUserRights");
    String strLoginFailedDueToAccountInvalid=parseValue(response,"/SOAP-ENV:Envelope/SOAP-ENV:Body/ns1:authenticate2/ns1:loginFailedDueToAccountInvalid");
    boolean loginFailedDueToConnectionRestrictions=Boolean.parseBoolean(strLoginFailedDueToConnectionRestrictions);
    if (loginFailedDueToConnectionRestrictions)     throw new IOException("login failed because of connection restrictions");
    boolean loginFailedDueToInsufficientUserRights=Boolean.parseBoolean(strLoginFailedDueToInsufficientUserRights);
    if (loginFailedDueToInsufficientUserRights)     throw new IOException("login failed because of insufficient user rights");
    boolean loginFailedDueToAccountInvalid=Boolean.parseBoolean(strLoginFailedDueToAccountInvalid);
    if (loginFailedDueToAccountInvalid)     throw new IOException("login failed because of invalid account");
 else     throw new IOException("login failed because of unknown reason");
  }
  logger.debug("Connection successfully opened");
  cookies=authclient.getCookies();
  WSControllerState status=queryControllerState();
  logger.debug("Controller state {}",status.getState());
  setConnectionState(ConnectionState.CONNECTED);
  return true;
}
