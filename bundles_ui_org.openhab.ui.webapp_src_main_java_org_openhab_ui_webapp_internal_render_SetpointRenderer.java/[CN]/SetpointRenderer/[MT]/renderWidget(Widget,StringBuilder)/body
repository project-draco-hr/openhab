{
  Setpoint sp=(Setpoint)w;
  State state=itemUIRegistry.getState(w);
  String newLowerState=state.toString();
  String newHigherState=state.toString();
  BigDecimal step=sp.getStep();
  if (step == null) {
    step=BigDecimal.ONE;
  }
  BigDecimal minValue=sp.getMinValue();
  if (minValue == null) {
    minValue=BigDecimal.ZERO;
  }
  BigDecimal maxValue=sp.getMaxValue();
  if (maxValue == null) {
    maxValue=BigDecimal.valueOf(100);
  }
  if (state instanceof DecimalType) {
    DecimalType actState=(DecimalType)state;
    BigDecimal newLower=actState.toBigDecimal().subtract(step);
    BigDecimal newHigher=actState.toBigDecimal().add(step);
    if (newLower.compareTo(minValue) < 0) {
      newLower=minValue;
    }
    if (newHigher.compareTo(maxValue) > 0) {
      newHigher=maxValue;
    }
    newLowerState=newLower.toString();
    newHigherState=newHigher.toString();
  }
  String snippetName="setpoint";
  String snippet=getSnippet(snippetName);
  snippet=snippet.replaceAll("%id%",itemUIRegistry.getWidgetId(w));
  snippet=snippet.replaceAll("%icon%",escapeURLPath(itemUIRegistry.getIcon(w)));
  snippet=snippet.replaceAll("%item%",w.getItem());
  snippet=snippet.replaceAll("%state%",state.toString());
  snippet=snippet.replaceAll("%newlowerstate%",newLowerState);
  snippet=snippet.replaceAll("%newhigherstate%",newHigherState);
  snippet=snippet.replaceAll("%label%",getLabel(w));
  snippet=snippet.replaceAll("%servletname%",WebAppServlet.SERVLET_NAME);
  snippet=snippet.replaceAll("%minValue%",minValue.toString());
  snippet=snippet.replaceAll("%maxValue%",maxValue.toString());
  snippet=snippet.replaceAll("%step%",step.toString());
  sb.append(snippet);
  return null;
}
