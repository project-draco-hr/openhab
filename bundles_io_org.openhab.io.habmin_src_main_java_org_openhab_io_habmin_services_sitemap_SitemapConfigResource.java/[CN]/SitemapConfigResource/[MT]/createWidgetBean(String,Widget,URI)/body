{
  ItemUIRegistry itemUIRegistry=HABminApplication.getItemUIRegistry();
  WidgetConfigBean bean=new WidgetConfigBean();
  if (widget.getItem() != null) {
    Item item=null;
    try {
      item=itemUIRegistry.getItem(widget.getItem());
    }
 catch (    ItemNotFoundException e) {
    }
    if (item != null) {
      bean.item=item.getName();
    }
  }
  bean.icon=widget.getIcon();
  if (widget.getLabel() != null) {
    LabelSplitHelper label=new LabelSplitHelper(widget.getLabel());
    bean.label=label.getLabel();
    bean.format=label.getFormat();
    bean.units=label.getUnit();
    bean.translateService=label.getTranslationService();
    bean.translateRule=label.getTranslationRule();
  }
  if (widget.getVisibility() != null && widget.getVisibility().size() > 0) {
    bean.visibility=new ArrayList<VisibilityBean>();
    for (    VisibilityRule visibility : widget.getVisibility()) {
      VisibilityBean visibilityBean=new VisibilityBean();
      visibilityBean.item=visibility.getItem();
      visibilityBean.state=visibility.getState();
      bean.visibility.add(visibilityBean);
    }
  }
  if (widget.getIconColor() != null && widget.getIconColor().size() > 0) {
    bean.iconcolor=new ArrayList<ColorBean>();
    for (    ColorArray color : widget.getIconColor()) {
      ColorBean colorBean=new ColorBean();
      colorBean.state=color.getState();
      colorBean.color=color.getArg();
      if (colorBean.state.startsWith("\"") && colorBean.state.endsWith("\""))       colorBean.state=colorBean.state.substring(1,colorBean.state.length() - 1);
      bean.iconcolor.add(colorBean);
    }
  }
  if (widget.getLabelColor() != null && widget.getLabelColor().size() > 0) {
    bean.labelcolor=new ArrayList<ColorBean>();
    for (    ColorArray color : widget.getLabelColor()) {
      ColorBean colorBean=new ColorBean();
      colorBean.state=color.getState();
      colorBean.color=color.getArg();
      if (colorBean.state.startsWith("\"") && colorBean.state.endsWith("\""))       colorBean.state=colorBean.state.substring(1,colorBean.state.length() - 1);
      bean.labelcolor.add(colorBean);
    }
  }
  if (widget.getValueColor() != null && widget.getValueColor().size() > 0) {
    bean.valuecolor=new ArrayList<ColorBean>();
    for (    ColorArray color : widget.getValueColor()) {
      ColorBean colorBean=new ColorBean();
      colorBean.state=color.getState();
      colorBean.color=color.getArg();
      if (colorBean.state.startsWith("\"") && colorBean.state.endsWith("\""))       colorBean.state=colorBean.state.substring(1,colorBean.state.length() - 1);
      bean.valuecolor.add(colorBean);
    }
  }
  bean.type=widget.eClass().getName();
  if (widget instanceof LinkableWidget) {
    LinkableWidget linkableWidget=(LinkableWidget)widget;
    EList<Widget> children=itemUIRegistry.getChildren(linkableWidget);
    for (    Widget child : children) {
      bean.widgets.add(createWidgetBean(sitemapName,child,uri));
    }
  }
  if (widget instanceof Switch) {
    Switch switchWidget=(Switch)widget;
    for (    Mapping mapping : switchWidget.getMappings()) {
      MappingBean mappingBean=new MappingBean();
      mappingBean.command=mapping.getCmd();
      mappingBean.label=mapping.getLabel();
      bean.mapping.add(mappingBean);
    }
  }
  if (widget instanceof Selection) {
    Selection selectionWidget=(Selection)widget;
    for (    Mapping mapping : selectionWidget.getMappings()) {
      MappingBean mappingBean=new MappingBean();
      mappingBean.command=mapping.getCmd();
      mappingBean.label=mapping.getLabel();
      bean.mapping.add(mappingBean);
    }
  }
  if (widget instanceof Slider) {
    Slider sliderWidget=(Slider)widget;
    bean.sendFrequency=sliderWidget.getFrequency();
    bean.switchSupport=sliderWidget.isSwitchEnabled();
  }
  if (widget instanceof List) {
    org.openhab.model.sitemap.List listWidget=(org.openhab.model.sitemap.List)widget;
    bean.separator=listWidget.getSeparator();
  }
  if (widget instanceof Image) {
    Image imageWidget=(Image)widget;
    bean.url=imageWidget.getUrl();
    if (imageWidget.getRefresh() > 0) {
      bean.refresh=imageWidget.getRefresh();
    }
    if (imageWidget.getUrlArray() != null && imageWidget.getUrlArray().size() > 0) {
      for (      ConditionArray url : imageWidget.getUrlArray()) {
        UrlBean urlBean=new UrlBean();
        urlBean.state=url.getState();
        urlBean.url=url.getArg();
        bean.urlarray.add(urlBean);
      }
    }
  }
  if (widget instanceof Video) {
    Video videoWidget=(Video)widget;
    bean.url=videoWidget.getUrl();
    if (videoWidget.getUrlArray() != null && videoWidget.getUrlArray().size() > 0) {
      for (      ConditionArray url : videoWidget.getUrlArray()) {
        UrlBean urlBean=new UrlBean();
        urlBean.state=url.getState();
        urlBean.url=url.getArg();
        bean.urlarray.add(urlBean);
      }
    }
  }
  if (widget instanceof Webview) {
    Webview webViewWidget=(Webview)widget;
    bean.url=webViewWidget.getUrl();
    bean.height=webViewWidget.getHeight();
  }
  if (widget instanceof Chart) {
    Chart chartWidget=(Chart)widget;
    bean.service=chartWidget.getService();
    bean.period=chartWidget.getPeriod();
    if (chartWidget.getRefresh() > 0) {
      bean.refresh=chartWidget.getRefresh();
    }
  }
  if (widget instanceof Setpoint) {
    Setpoint setpointWidget=(Setpoint)widget;
    bean.minValue=setpointWidget.getMinValue();
    bean.maxValue=setpointWidget.getMaxValue();
    bean.step=setpointWidget.getStep();
  }
  return bean;
}
