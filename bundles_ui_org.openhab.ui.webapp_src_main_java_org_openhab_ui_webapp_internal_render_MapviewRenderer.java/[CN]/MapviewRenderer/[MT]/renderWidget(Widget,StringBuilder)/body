{
  Mapview mapview=(Mapview)w;
  String snippet=getSnippet("mapview");
  State state=itemUIRegistry.getState(mapview);
  if (state instanceof PointType) {
    PointType pointState=(PointType)state;
    double latitude=pointState.getLatitude().doubleValue();
    double longitude=pointState.getLongitude().doubleValue();
    snippet=StringUtils.replace(snippet,"%lat%",Double.toString(latitude));
    snippet=StringUtils.replace(snippet,"%lon%",Double.toString(longitude));
    snippet=StringUtils.replace(snippet,"%lonminus%",Double.toString(longitude - 0.01));
    snippet=StringUtils.replace(snippet,"%lonplus%",Double.toString(longitude + 0.01));
    snippet=StringUtils.replace(snippet,"%latminus%",Double.toString(latitude - 0.01));
    snippet=StringUtils.replace(snippet,"%latplus%",Double.toString(latitude + 0.01));
  }
  int height=mapview.getHeight();
  if (height == 0) {
    height=4;
  }
  height=height * 36;
  snippet=StringUtils.replace(snippet,"%height%",Integer.toString(height));
  sb.append(snippet);
  return null;
}
