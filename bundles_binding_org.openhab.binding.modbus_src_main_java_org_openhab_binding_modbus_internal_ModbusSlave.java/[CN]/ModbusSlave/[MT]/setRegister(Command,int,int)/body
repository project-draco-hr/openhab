{
  Register newValue=null;
synchronized (storage) {
    newValue=(Register)((InputRegister[])storage)[readRegister];
  }
  if (command instanceof IncreaseDecreaseType) {
    if (command.equals(IncreaseDecreaseType.INCREASE))     newValue.setValue(newValue.getValue() + 1);
 else     if (command.equals(IncreaseDecreaseType.DECREASE))     newValue.setValue(newValue.getValue() - 1);
  }
 else   if (command instanceof UpDownType) {
    if (command.equals(UpDownType.UP))     newValue.setValue(newValue.getValue() + 1);
 else     if (command.equals(UpDownType.DOWN))     newValue.setValue(newValue.getValue() - 1);
  }
 else   if (command instanceof DecimalType) {
    newValue.setValue(((DecimalType)command).intValue());
  }
  if (connection == null) {
    return;
  }
  ModbusRequest request=new WriteSingleRegisterRequest(writeRegister,newValue);
  request.setUnitID(id);
  transaction.setRequest(request);
  try {
    logger.debug("ModbusSlave: FC" + request.getFunctionCode() + " ref="+ writeRegister+ " value="+ newValue.getValue());
    transaction.execute();
  }
 catch (  Exception e) {
    logger.debug("ModbusSlave:" + e.getMessage());
    return;
  }
}
