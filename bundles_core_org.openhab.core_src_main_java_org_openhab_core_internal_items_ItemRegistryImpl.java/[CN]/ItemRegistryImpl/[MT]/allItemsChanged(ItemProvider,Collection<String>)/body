{
  if (oldItemNames == null || oldItemNames.isEmpty()) {
    oldItemNames=new HashSet<String>();
    Collection<Item> oldItems=itemMap.get(provider);
    if (oldItems != null && oldItems.size() > 0) {
      for (      Item oldItem : oldItems) {
        oldItemNames.add(oldItem.getName());
      }
    }
  }
  Collection<Item> items=Collections.synchronizedCollection(new ArrayList<Item>());
  itemMap.put(provider,items);
  for (  Item item : provider.getItems()) {
    if (initializeItem(item)) {
      items.add(item);
    }
  }
  for (  ItemRegistryChangeListener listener : listeners) {
    listener.allItemsChanged(oldItemNames);
  }
}
