{
  if (filename == null || source == null) {
    throw new TransformationException("the given parameters 'filename' and 'source' must not be null");
  }
  logger.debug("about to transform '{}' by the Java Script '{}'",source,filename);
  Reader reader;
  try {
    String path=ConfigDispatcher.getConfigFolder() + File.separator + TransformationActivator.TRANSFORM_FOLDER_NAME+ File.separator+ filename;
    reader=new InputStreamReader(new FileInputStream(path));
  }
 catch (  FileNotFoundException e) {
    throw new TransformationException("an error occured durin script loading",e);
  }
  ScriptEngineManager manager=new ScriptEngineManager();
  ScriptEngine engine=manager.getEngineByName("javascript");
  engine.put("input",source);
  Object result=null;
  long startTime=System.currentTimeMillis();
  try {
    result=engine.eval(reader);
  }
 catch (  ScriptException e) {
    throw new TransformationException("an error occured during script execution",e);
  }
 finally {
    try {
      reader.close();
    }
 catch (    IOException e) {
    }
  }
  logger.trace("java script execution elapsed {} ms",System.currentTimeMillis() - startTime);
  return String.valueOf(result);
}
